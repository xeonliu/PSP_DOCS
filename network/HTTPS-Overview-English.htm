<html lang="en">
<head>
<title>HTTPS-Overview</title>
<meta http-equiv="Content-Type" content= text/html; charset=iso-8859-1>
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta http-equiv="Content-Style-Type" content="Text/css>
<meta name="Author"Content=" Sony Computer Entertainment Inc.">
</head>
<body bgcolor="#ffffff" text="#000000" >
<a name=TOP></a>
<table WIDTH="100%">
<tr><td>
<h3>PSP&trade; Programmer Tool Runtime Library Release 6.3.0</h3>
</td>
</tr>
</table>
<hr noshade size=6>
<center><h1>
Using HTTPS
</h1></center>
</a>
<!-- sce_hd1 -->

<!-- sce_hd3 -->
<a name="Heading3_1">
<h2>
 1 <!-- hp --><b>Library Overview</b>
<hr noshade>
</h2>


<!-- sce_hd4 -->
<a name="Heading4_1_1">
<h3>
<a href="#Heading3_1"> 1. </a>1 
<!-- hp1 --><b>Overview</b><br>
</a>
</h3>
<div style="margin-left:50px;">This is a supplementary document that explains how to use the HTTP library (libhttp) to perform HTTPS communication. Please use it together with the libhttp documentation.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_1_2">
<h3>
<a href="#Heading3_1"> 1. </a>2 
<!-- hp1 --><b>Related Files</b><br>
</a>
</h3>
<div style="margin-left:50px;">PSPNET is required to use libhttp. Please see the PSP&trade; network library documentation for information about files that are needed by PSPNET.<br>The following additional files are needed to use libhttp.<br><br></div>
<div style="margin-left:90px;">
<table border=1>
<tr>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>Category</b>&nbsp;&nbsp;</td>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>Filename</b>&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;Header file&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;libhttp.h&nbsp;&nbsp;<br>&nbsp;&nbsp;libhttp_error.h&nbsp;&nbsp;<br>&nbsp;&nbsp;libparse_uri.h&nbsp;&nbsp;<br>&nbsp;&nbsp;libparse_http.h&nbsp;&nbsp;<br>&nbsp;&nbsp;libhttp/http_methods.h&nbsp;&nbsp;<br>&nbsp;&nbsp;libhttp/schemes.h&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;Stub library file&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;libhttp_stub.a&nbsp;&nbsp;<br>&nbsp;&nbsp;libparse_uri_stub.a&nbsp;&nbsp;<br>&nbsp;&nbsp;libparse_http_stub.a&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;weak import stub library file&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;libhttp_stub_weak.a&nbsp;&nbsp;<br>&nbsp;&nbsp;libparse_uri_stub_weak.a&nbsp;&nbsp;<br>&nbsp;&nbsp;libparse_http_stub_weak.a&nbsp;&nbsp;</td>
</tr>
</table>
</div>
<br>
<br>
<div style="margin-left:50px;">To use SSL, the following files are required in addition to the ones shown above.<br><br></div>
<div style="margin-left:90px;">
<table border=1>
<tr>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>Category</b>&nbsp;&nbsp;</td>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>Filename</b>&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;Header file&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;libhttps.h&nbsp;&nbsp;<br>&nbsp;&nbsp;libssl.h&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;Stub library file&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;libssl_stub.a&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;weak import stub library file&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;libssl_stub_weak.a&nbsp;&nbsp;</td>
</tr>
</table>
</div>
<br>
<br>

<!-- sce_hd4 -->
<a name="Heading4_1_3">
<h3>
<a href="#Heading3_1"> 1. </a>3 
<!-- hp1 --><b>Reference Data</b><br>
</a>
</h3>
<div style="margin-left:50px;">libhttp conforms to HTTP/1.1.<br></div>

<!-- sce_hd3 -->
<a name="Heading3_2">
<h2>
 2 <!-- hp --><b>Overview of Usage Procedure</b>
<hr noshade>
</h2>


<!-- sce_hd4 -->
<a name="Heading4_2_1">
<h3>
<a href="#Heading3_2"> 2. </a>1 
<!-- hp1 --><b>Initializing the Network Library and Connecting to the Network</b><br>
</a>
</h3>
<div style="margin-left:50px;">Before you can use libhttp for HTTP communication, you must first initialize the network library and establish a network connection. Please refer to the PSP&trade; network library documentation for information on how to perform each of these steps.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_2_2">
<h3>
<a href="#Heading3_2"> 2. </a>2 
<!-- hp1 --><b>Initializing SSL and Loading the Certificate Load Module</b><br>
</a>
</h3>
<div style="margin-left:50px;">Before you can use SSL, you must load the SSL module set, in addition to the libhttp module set, and you must initialize libssl in advance. Please refer to the libssl-Overview.pdf and libssl-Reference.pdf documents for information on initializing libssl.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_2_3">
<h3>
<a href="#Heading3_2"> 2. </a>3 
<!-- hp1 --><b>Initializing libhttp and HTTPS</b><br>
</a>
</h3>
<div style="margin-left:50px;">After libssl is initialized, call <a href="../network/libhttp-Reference-English.htm#sceHttpInit">sceHttpInit</a>(). When that has completed, call <a href="../network/HTTPS-Reference-English.htm#sceHttpsInit">sceHttpsInit</a>() to enable HTTPS communication. You should call <a href="../network/HTTPS-Reference-English.htm#sceHttpsInit">sceHttpsInit</a>() only after libhttp initialization has completed.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_2_4">
<h3>
<a href="#Heading3_2"> 2. </a>4 
<!-- hp1 --><b>Loading Certificates</b><br>
</a>
</h3>
<div style="margin-left:50px;">The PSP&trade; maintains CA certificates in FLASH storage. By using <a href="../network/HTTPS-Reference-English.htm#sceHttpsLoadDefaultCert">sceHttpsLoadDefaultCert</a>(), an application can use HTTPS without having to provide a CA certificate. Conversely, an application can specify its own CA certificate when calling libHttpsInit() or libHttpsInitWithPath(). Memory used for storing certificates is freed after <a href="../network/HTTPS-Reference-English.htm#sceHttpsEnd">sceHttpsEnd</a>() is executed.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_2_5">
<h3>
<a href="#Heading3_2"> 2. </a>5 
<!-- hp1 --><b>Configuring Certification</b><br>
</a>
</h3>
<div style="margin-left:50px;">In addition, <a href="../network/HTTPS-Reference-English.htm#sceHttpsEnableOption">sceHttpsEnableOption</a>() and <a href="../network/HTTPS-Reference-English.htm#sceHttpsDisableOption">sceHttpsDisableOption</a>() can be used to enable and disable checking of certain options such as the expiration date of a server certificate.<br></div>

<!-- sce_title -->
<a Name ="HeadingT_2_5_1">
<div style="margin-left:40px;"><h4><b>Initialization and Termination Processing Flows</b><br><br></h4></div></a>

        <div style="margin-left:80px;"><pre><font size=3>...			/* Network library initialization and connection processing */
<a href="../network/libssl-Reference-English.htm#sceSslInit">sceSslInit</a>();			/* Initialize SSL */
<a href="../network/libhttp-Reference-English.htm#sceHttpInit">sceHttpInit</a>();			/* Initialize HTTP */
<a href="../network/HTTPS-Reference-English.htm#sceHttpsInit">sceHttpsInit</a>();		/* Initialize HTTPS */
<a href="../network/HTTPS-Reference-English.htm#sceHttpsLoadDefaultCert">sceHttpsLoadDefaultCert</a>();	/* Load RootCA certificate (optional) */
<a href="../network/HTTPS-Reference-English.htm#sceHttpsEnableOption">sceHttpsEnableOption</a>();	/* Configure SSL communication (optional) */
....				/* Perform HTTP or HTTPS communication */
<a href="../network/HTTPS-Reference-English.htm#sceHttpsEnd">sceHttpsEnd</a>();			/* Terminate HTTPS */
<a href="../network/libhttp-Reference-English.htm#sceHttpEnd">sceHttpEnd</a>();			/* Terminate HTTP */
<a href="../network/libssl-Reference-English.htm#sceSslEnd">sceSslEnd</a>();			/* Terminate SSL */
...				/* Network library termination processing */

</font></pre></div>

<!-- sce_hd3 -->
<a name="Heading3_3">
<h2>
 3 <!-- hp --><b>Precautions</b>
<hr noshade>
</h2>


<!-- sce_hd4 -->
<a name="Heading4_3_1">
<h3>
<a href="#Heading3_3"> 3. </a>1 
<!-- hp1 --><b>Stack Size</b><br>
</a>
</h3>

<!-- sce_hd5 -->
<div style="margin-left:40px;"><a name="Heading5_3_1_1"><h4>
(1)&nbsp;<b>Required stack size for API calls</b><br></h4>
</a></div>
<div style="margin-left:67px;">Calling the API of functions that begin with &quot;sceHttps…&quot; requires 2048 bytes (SCE_HTTP_LEAST_STACK_SIZE) of stack size. <br>If the stack size is not sufficient, the error <a href="../network/PSPNET_Error-Reference-English.htm#SCE_ERROR_NET_INSUFFICIENT_STACKSIZE">SCE_ERROR_NET_INSUFFICIENT_STACKSIZE</a> will be returned.<br></div>

<!-- sce_hd5 -->
<div style="margin-left:40px;"><a name="Heading5_3_1_2"><h4>
(2)&nbsp;<b>Stack size for callback functions</b><br></h4>
</a></div>
<div style="margin-left:67px;">In the following functions, the stack size for the specified callback function will be 4096 bytes (SCE_HTTP_CALLBACK_LEAST_STACK_SIZE):<br></div>
</ul>
<div style="margin-left:70px;"><ul>
<li> <a href="../network/HTTPS-Reference-English.htm#sceHttpsSetSslCallback">sceHttpsSetSslCallback</a>()
</ul></div>

<!-- sce_hd5 -->
<div style="margin-left:40px;"><a name="Heading5_3_1_3"><h4>
(3)&nbsp;<b>SSL Certificate Verification Policy</b><br></h4>
</a></div>
<div style="margin-left:67px;">Determine each check item for HTTPS communication, which is set by using <a href="../network/HTTPS-Reference-English.htm#sceHttpsEnableOption">sceHttpsEnableOption</a>() or <a href="../network/HTTPS-Reference-English.htm#sceHttpsDisableOption">sceHttpsDisableOption</a>(), according to the policy of the title.<br>Example<br></div>
        <div style="margin-left:80px;"><pre><font size=3>// To not care if the user clock is offset
<a href="../network/HTTPS-Reference-English.htm#sceHttpsDisableOption">sceHttpsDisableOption</a>(SCE_HTTPS_FLAG_NOT_AFTER_CHECK 
			| SCE_HTTPS_FLAG_NOT_BEFORE_CHECK);
// If it is OK to be connected to a fake server
<a href="../network/HTTPS-Reference-English.htm#sceHttpsDisableOption">sceHttpsDisableOption</a>(SCE_HTTPS_FLAG_SERVER_VERIFY);
</font></pre></div>
<div style="margin-left:67px;">However, if the specification might cause the user to be subject to a phishing fraud, be careful not to put the user at a disadvantage.<br></div>
<div style="margin-left:50px;"><br></div>
        <div style="margin-left:80px;"><pre><font size=3>
</font></pre></div>
<p><p><hr>
<div ALIGN="right">
    &copy;2006 Sony Computer Entertainment Inc.  All Rights Reserved.<br>
    SCE CONFIDENTIAL
</div>
</body>
</html>
