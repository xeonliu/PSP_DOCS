<html lang="en">
<head>
<title>PSP_Boot_Binary-Overview</title>
<meta http-equiv="Content-Type" content= text/html; charset=iso-8859-1>
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta http-equiv="Content-Style-Type" content="Text/css>
<meta name="Author"Content=" Sony Computer Entertainment Inc.">
</head>
<body bgcolor="#ffffff" text="#000000" >
<a name=TOP></a>
<table WIDTH="100%">
<tr><td>
<h3>PSP&trade; Programmer Tool Runtime Library Release 6.3.0</h3>
</td>
</tr>
</table>
<hr noshade size=6>
<center><h1>
External Bootable Binaries Overview
</h1></center>
</a>
<!-- sce_hd1 -->

<!-- sce_hd3 -->
<a name="Heading3_1">
<h2>
 1 <!-- hp --><b>Overview of PSP&trade; External Bootable Binaries</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">A PSP&trade; external bootable binary is a boot program that is sent to a PSP&trade; using the game sharing function and executed on the PSP&trade;.<br>A PSP&trade; external bootable binary must be encrypted by using a prescribed method and packaged in advance. This document explains how to create a PSP&trade; external bootable binary.<br><br>A properly processed boot binary can be used by the game sharing function. The game sharing function transfers the binary between PSP&trade; consoles using ad hoc mode communication.<br><br></div>

<!-- sce_hd3 -->
<a name="Heading3_2">
<h2>
 2 <!-- hp --><b>Authoring of External Bootable Binaries</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">The following diagram shows the authoring process for an external bootable binary.<br></div>

<div align=center>
<p>
<img src="gif/PSP_Boot_Binary-Overview-English001.gif">
</div>
<br>
<div style="margin-left:50px;"><br></div>

<!-- sce_fignum -->
<div align=center>
<p>
<b>Figure 1 Boot Program Authoring Flow</b><br>
</div>
<br>
<div style="margin-left:50px;"><br>Two types of authoring are provided: one for the development phase and one for the release phase. A boot file to which authoring has been applied is known as an &quot;authorized boot file.&quot;<br></div>

<!-- sce_hd4 -->
<a name="Heading4_2_1">
<h3>
<a href="#Heading3_2"> 2. </a>1 
<!-- hp1 --><b>Development Phase</b><br>
</a>
</h3>
<div style="margin-left:50px;">A boot binary which was authorized during the development phase can only be used with the development tool.<br>By applying to us in order to perform authoring during the development phase, licensees can use a public server for authoring boot files.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_2_2">
<h3>
<a href="#Heading3_2"> 2. </a>2 
<!-- hp1 --><b>Release Phase</b><br>
</a>
</h3>
<div style="margin-left:50px;">A boot binary which was authorized during the release phase can be used with a normal PSP&trade; and with the development tool.<br>Licensees who wish to perform release phase authoring should contact us.<br><br></div>

<!-- sce_hd3 -->
<a name="Heading3_3">
<h2>
 3 <!-- hp --><b>Packaging of External Bootable Binaries</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">The following diagram shows the packaging steps needed to create an external bootable binary.<br></div>

<div align=center>
<p>
<img src="gif/PSP_Boot_Binary-Overview-English002.gif">
</div>
<br>
<div style="margin-left:50px;"><br></div>

<!-- sce_fignum -->
<div align=center>
<p>
<b>Figure 2 Packaging Flow</b><br>
</div>
<br>
<br>
<div style="margin-left:50px;">The psp_boot_packager tool is used for packaging. This tool is run as a command in Linux.<br><br>Usage method:<br>Generate external bootable binary:<br></div>
        <div style="margin-left:80px;"><pre><font size=3>psp_boot_packager c [PARAM.SFO] [boot program] [output file]


</font></pre></div>
<div style="margin-left:50px;">The following table describes each file.<br><br></div>
<div style="margin-left:90px;">
<table border=1>
<tr>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>Filename</b>&nbsp;&nbsp;</td>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>Description</b>&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;PARAM.SFO&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;System file that defines the contents of the external bootable&nbsp;&nbsp;<br>&nbsp;&nbsp;binary. It includes information such as the title name and age&nbsp;&nbsp;<br>&nbsp;&nbsp;restrictions.&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;Boot program&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;Boot program file ("Authorized main program" in the figure&nbsp;&nbsp;<br>&nbsp;&nbsp;above). This file is an executable file on which authoring has been &nbsp;&nbsp;<br>&nbsp;&nbsp;performed.&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;Output file&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;External bootable binary that is generated.&nbsp;&nbsp;<br>&nbsp;&nbsp;Specify the filename for outputting the result.&nbsp;&nbsp;</td>
</tr>
</table>
</div>
<br>
<br>
<div style="margin-left:50px;">A game sharing system file template and a game catch system file template are provided.<br></div>
<div style="margin-left:40px;"><ul>
<li> WLANGame_SystemFile_Config.sfc<br>Game sharing system file template
</ul></div>
<div style="margin-left:50px;">Details of each item in the system file are shown below.<br><br></div>
<div style="margin-left:90px;">
<table border=1>
<tr>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>Key</b>&nbsp;&nbsp;</td>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>Type</b>&nbsp;&nbsp;</td>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>Value</b>&nbsp;&nbsp;</td>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>Setting Example</b>&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;TITLE&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;Required&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;Game title name&nbsp;&nbsp;<br>&nbsp;&nbsp;Character code: UTF8&nbsp;&nbsp;<br>&nbsp;&nbsp;Length: Up to 128 bytes (including &nbsp;&nbsp;<br>&nbsp;&nbsp;NULL)&nbsp;&nbsp;<br>&nbsp;&nbsp;Cannot contain linefeeds.&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;Meadow Warrior&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;PARENTAL_LEVEL&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;Required&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;Parental lock level&nbsp;&nbsp;<br>&nbsp;&nbsp;Settings: 0 - 11&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;1&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;DISC_ID&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;Required&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;Product number&nbsp;&nbsp;<br>&nbsp;&nbsp;Available characters: A - Z, 0 - 9&nbsp;&nbsp;<br>&nbsp;&nbsp;Length: Up to 13 bytes (including &nbsp;&nbsp;<br>&nbsp;&nbsp;NULL)&nbsp;&nbsp;<br>&nbsp;&nbsp;Always set the same value as in the &nbsp;&nbsp;<br>&nbsp;&nbsp;UMD&trade; system file.&nbsp;&nbsp;<br>&nbsp;&nbsp;<b>(*) Do not enter a hyphen "-".</b>&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;ABCD01234&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;DISC_VERSION&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;Optional&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;Program version&nbsp;&nbsp;<br>&nbsp;&nbsp;A number can be freely set in the &nbsp;&nbsp;<br>&nbsp;&nbsp;following format.&nbsp;&nbsp;<br>&nbsp;&nbsp;Format: X.XX(X is 0 - 9)&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;1.00&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;REGION&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;Required&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;Region&nbsp;&nbsp;<br>&nbsp;&nbsp;(This can be the same as the &nbsp;&nbsp;<br>&nbsp;&nbsp;SystemFileEditor default value.)&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;32768&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;BOOTABLE&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;Required&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;Whether or not it is bootable&nbsp;&nbsp;<br>&nbsp;&nbsp;(This can be the same as the &nbsp;&nbsp;<br>&nbsp;&nbsp;SystemFileEditor default value.)&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;1&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;PSP_SYSTEM_VER&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;Required&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;PSP&trade; system software version &nbsp;&nbsp;<br>&nbsp;&nbsp;required for execution&nbsp;&nbsp;<br>&nbsp;&nbsp;(This can be the same as the &nbsp;&nbsp;<br>&nbsp;&nbsp;SystemFileEditor default value.)&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;1.50&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;CATEGORY&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;Required&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;System file category&nbsp;&nbsp;<br>&nbsp;&nbsp;(This can be the same as the &nbsp;&nbsp;<br>&nbsp;&nbsp;SystemFileEditor default value.)&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;WG&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;SHARING_ID&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;Required&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;ID used for distinguishing identical &nbsp;&nbsp;<br>&nbsp;&nbsp;boot binaries. Set a numerical value &nbsp;&nbsp;<br>&nbsp;&nbsp;greater than or equal to 0. &nbsp;&nbsp;<br>&nbsp;&nbsp;When multiple versions are &nbsp;&nbsp;<br>&nbsp;&nbsp;generated with the same DISC_ID, &nbsp;&nbsp;<br>&nbsp;&nbsp;this field can be set freely in order &nbsp;&nbsp;<br>&nbsp;&nbsp;to distinguish the different &nbsp;&nbsp;<br>&nbsp;&nbsp;versions.&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;0&nbsp;&nbsp;</td>
</tr>
</table>
</div>
<br>

<!-- sce_hd3 -->
<a name="Heading3_4">
<h2>
 4 <!-- hp --><b>Precautions</b>
<hr noshade>
</h2>


<!-- sce_hd4 -->
<a name="Heading4_4_1">
<h3>
<a href="#Heading3_4"> 4. </a>1 
<!-- hp1 --><b>PSP&trade; System Software Version</b><br>
</a>
</h3>
<div style="margin-left:50px;">If the version of system software on the PSP&trade; that is to execute a boot binary is older than the version of the runtime library that is used by the boot binary, it will not be possible to execute the boot binary.<br>In this case, the receiving-side PSP&trade; system software must be updated.<br><br>Sample combinations:<br><br></div>
<div style="margin-left:90px;">
<table border=1>
<tr>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>Startup Succeeds/Fails</b>&nbsp;&nbsp;</td>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>Hardware Tool Package</b>&nbsp;&nbsp;<br>&nbsp;&nbsp;<b>Release Version</b>&nbsp;&nbsp;</td>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>PSP</b>&trade;<b> System Software Version</b>&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;O&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;1.00&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;1.50&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;O&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;1.00&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;1.00&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;O&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;1.50&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;1.50&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;x&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;1.50&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;1.00&nbsp;&nbsp;</td>
</tr>
</table>
</div>
<br>

<!-- sce_hd4 -->
<a name="Heading4_4_2">
<h3>
<a href="#Heading3_4"> 4. </a>2 
<!-- hp1 --><b>Maximum Size of an External Bootable Binary</b><br>
</a>
</h3>
<div style="margin-left:50px;">The maximum size of an external bootable binary (bootable binary in Fig. 2) that can be sent is 8 MiB (8 x 1024 x 1024 bytes). The game sharing binary sends API check this size. <br>However, the size limit for the binary that is generated is not checked during the authoring process. Be sure that this size limit is not exceeded when packaging the external bootable binary together with the system file. <br></div>

<!-- sce_hd4 -->
<a name="Heading4_4_3">
<h3>
<a href="#Heading3_4"> 4. </a>3 
<!-- hp1 --><b>Module Loading</b><br>
</a>
</h3>
<div style="margin-left:50px;">A PSP&trade; external bootable binary cannot load modules that reside on a UMD&trade;. The API <a href="../kernel/Module_Manager-Reference-English.htm#sceKernelLoadModuleBufferUsbWlan">sceKernelLoadModuleBufferUsbWlan</a>() can be used instead to load modules that reside in memory.<br><br></div>
        <div style="margin-left:80px;"><pre><font size=3>&lt;modulemgr_gamesharing.h&gt;
int <a href="../kernel/Module_Manager-Reference-English.htm#sceKernelLoadModuleBufferUsbWlan">sceKernelLoadModuleBufferUsbWlan</a>(SceSize size, 
					void *base, 
					int flags, 
					const <a href="../kernel/Module_Manager-Reference-English.htm#SceKernelLMOption">SceKernelLMOption</a> *pOpt
					);
</font></pre></div>
<div style="margin-left:50px;"><br>The following files are required in order to use <a href="../kernel/Module_Manager-Reference-English.htm#sceKernelLoadModuleBufferUsbWlan">sceKernelLoadModuleBufferUsbWlan</a>().<br><br></div>
<div style="margin-left:90px;">
<table border=1>
<tr>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>Category</b>&nbsp;&nbsp;</td>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>Filename</b>&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;Header file&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;modulemgr_gamesharing.h&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;Stub library file&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;modulemgr_user_stub_03.a&nbsp;&nbsp;</td>
</tr>
</table>
</div>
<br>
<br>
<div style="margin-left:50px;">However, modules can be loaded only if they are in the devkit/module or devkit/kmodule directories. Note that <a href="../kernel/Module_Manager-Reference-English.htm#sceKernelLoadModuleBufferUsbWlan">sceKernelLoadModuleBufferUsbWlan</a>() can only be used from programs that were created as external bootable binaries.<br><br></div>
<p><p><hr>
<div ALIGN="right">
    &copy;2009 Sony Computer Entertainment Inc.  All Rights Reserved.<br>
    SCE CONFIDENTIAL
</div>
</body>
</html>
