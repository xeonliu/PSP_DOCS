<html lang="jp">
<head>
<title>Ifhandle-Overview</title>
<meta http-equiv="Content-Type" content= text/html; charset=Shift_JIS>
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta http-equiv="Content-Style-Type" content="Text/css>
<meta name="Author"Content=" Sony Computer Entertainment Inc.">
</head>
<body bgcolor="#ffffff" text="#000000" >
<a name=TOP></a>
<table WIDTH="100%">
<tr><td>
<h3>PSP&reg; Programmer Tool Runtime Library Release 6.6.0</h3>
</td>
</tr>
</table>
<hr noshade size=6>
<center><h1>
ifhandle
</h1></center>
</a>
<!-- sce_hd1 -->

<!-- sce_hd3 -->
<a name="Heading3_1">
<h2>
 1 <!-- hp --><b>ライブラリ概要</b>
<hr noshade>
</h2>


<!-- sce_hd4 -->
<a name="Heading4_1_1">
<h3>
<a href="#Heading3_1"> 1. </a>1 
<!-- hp1 --><b>概要</b><br>
</a>
</h3>
<div style="margin-left:50px;">ifhandle.prxは、ネットワークライブラリPSPNETを構成するモジュールです。<br>本モジュールはパケット送受信を確率的に棄却する機能を実現し、棄却確率と棄却期間を設定・取得するAPIを提供します。<br>この機能は開発用に提供するもので、この機能を有効にすることで、ユーザの使用する電波環境を擬似的に実現することができます。<br>ライブラリ初期化時は常にパケット棄却機能は無効になっています。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_1_2">
<h3>
<a href="#Heading3_1"> 1. </a>2 
<!-- hp1 --><b>関連ファイル</b><br>
</a>
</h3>
<div style="margin-left:50px;">必要なファイルは次のとおりです。<br></div>
<div style="margin-left:90px;">
<table border=1>
<tr>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>ファイル名</b>&nbsp;&nbsp;</td>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>説明</b>&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;pspnet.h&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;ヘッダファイル&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;ifhandle_stub.a&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;スタブライブラリファイル&nbsp;&nbsp;</td>
</tr>
</table>
</div>
<br>

<!-- sce_hd4 -->
<a name="Heading4_1_3">
<h3>
<a href="#Heading3_1"> 1. </a>3 
<!-- hp1 --><b>サンプルプログラム</b><br>
</a>
</h3>
<div style="margin-left:50px;">サンプルは次のとおりです。<br></div>
</ol>
<div style="margin-left:40px;"><ul>
<li> devkit/sample/net/tool/droprate<br>パケット棄却確率、期間を設定・取得するサンプル
</ul></div>
<div style="margin-left:50px;"><br></div>

<!-- sce_hd3 -->
<a name="Heading3_2">
<h2>
 2 <!-- hp --><b>使用手順の概略</b>
<hr noshade>
</h2>


<!-- sce_hd4 -->
<a name="Heading4_2_1">
<h3>
<a href="#Heading3_2"> 2. </a>1 
<!-- hp1 --><b>初期化</b><br>
</a>
</h3>
<div style="margin-left:50px;">ifhandle.prxの機能を動作させるには、<a href="../network/PSPNET_Core-Reference-Japanese.htm#sceNetInit">sceNetInit</a>()が完了している必要があります。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_2_2">
<h3>
<a href="#Heading3_2"> 2. </a>2 
<!-- hp1 --><b>パケット棄却確率、棄却期間の設定</b><br>
</a>
</h3>
<div style="margin-left:50px;"><a href="../network/Ifhandle-Reference-Japanese.htm#sceNetSetDropRate">sceNetSetDropRate</a>()により、パケット棄却機能を作動および停止させることができます。<br>棄却確率をrate、棄却期間をdurationとすると、以下のようなコードになります。<br></div>
        <div style="margin-left:80px;"><pre><font size=3>
int ret = 0;

ret = <a href="../network/Ifhandle-Reference-Japanese.htm#sceNetSetDropRate">sceNetSetDropRate</a>(rate, duration);
if(ret &lt; 0){
	/* エラー処理 */
}
</font></pre></div>

<!-- sce_hd4 -->
<a name="Heading4_2_3">
<h3>
<a href="#Heading3_2"> 2. </a>3 
<!-- hp1 --><b>パケット棄却確率、棄却期間の取得</b><br>
</a>
</h3>
<div style="margin-left:50px;"><a href="../network/Ifhandle-Reference-Japanese.htm#sceNetGetDropRate">sceNetGetDropRate</a>()により、パケット棄却確率、棄却期間を取得することができます。<br>以下のコードにより、棄却確率をrate、棄却期間をdurationに格納します。<br></div>
        <div style="margin-left:80px;"><pre><font size=3>
int ret = 0;

ret = <a href="../network/Ifhandle-Reference-Japanese.htm#sceNetGetDropRate">sceNetGetDropRate</a>(&amp;rate, &amp;duration);
if(ret &lt; 0){
	/* エラー処理 */
}

</font></pre></div>

<!-- sce_hd3 -->
<a name="Heading3_3">
<h2>
 3 <!-- hp --><b>パケット棄却機能</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">パケット棄却機能はPSPNET使用タイトルの開発用に提供されるものです。<br>通信タイトルを実際にユーザが使用する環境では、さまざまな電波環境が想定されます。PSPNET使用タイトルは、悪条件の環境においても不具合なく動作することが求められます。開発時にパケット棄却機能を有効にすることで、ユーザの使用する電波環境を擬似的に実現することができます。また、パケット棄却確率と棄却期間は任意の値を設定可能ですので、さまざまな環境をテストすることができます。<br><br>PSPNETのパケット棄却機能は、以下のような動作になります。<br><br></div>
</ul>
<div style="margin-left:55px;"><ol>
<li VALUE=1> パケット送受信の際に、設定されている確率に従って棄却機能を作動させるかどうかを決定します。</li>
<li VALUE=2> 棄却機能を作動させる場合、その時点から設定されている棄却期間の間だけ、パケットの送受信をすべて棄却します。棄却機能を作動させない場合は、その時点から設定されている棄却期間の間、パケットの棄却は行ないません。</li>
<li VALUE=3> 棄却期間分が経過したら、1の状態に戻って判断を行ないます。なお棄却期間が0の場合は、1パケット毎に1の状態に戻って判断を行ないます</li>
</ol></div>
<div style="margin-left:50px;"><br>パケット棄却機能を無効にしたい場合は、棄却確率0に設定します。<br><a href="../network/PSPNET_Core-Reference-Japanese.htm#sceNetInit">sceNetInit</a>()呼び出し時には必ず無効になっています。<br><br></div>
<p><p><hr>
<div ALIGN="right">
    &copy;2009 Sony Computer Entertainment Inc.  All Rights Reserved.<br>
    SCE CONFIDENTIAL
</div>
</body>
</html>
