<html lang="jp">
<head>
<title>Graphics-Overview</title>
<meta http-equiv="Content-Type" content= text/html; charset=Shift_JIS>
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta http-equiv="Content-Style-Type" content="Text/css>
<meta name="Author"Content=" Sony Computer Entertainment Inc.">
</head>
<body bgcolor="#ffffff" text="#000000" >
<a name=TOP></a>
<table WIDTH="100%">
<tr><td>
<h3>PSP&reg; Programmer Tool Runtime Library Release 6.6.0</h3>
</td>
</tr>
</table>
<hr noshade size=6>
<center><h1>
グラフィックス概要
</h1></center>
</a>
<!-- sce_hd1 -->

<!-- sce_hd3 -->
<a name="Heading3_1">
<h2>
 1 <!-- hp --><b>グラフィックス処理の概要</b>
<hr noshade>
</h2>


<!-- sce_hd4 -->
<a name="Heading4_1_1">
<h3>
<a href="#Heading3_1"> 1. </a>1 
<!-- hp1 --><b>グラフィックス処理の流れ</b><br>
</a>
</h3>
<div style="margin-left:50px;">PSP&reg;用グラフィックスデータの作成と描画処理の典型的な流れを下図に示します。<br></div>

<div align=center>
<p>
<img src="gif/Graphics-Overview-Japanese001.gif">
</div>
<br>
<div style="margin-left:50px;"><br></div>

<!-- sce_fignum -->
<div align=center>
<p>
<b>図 1  PSP&reg;グラフィック処理の流れ</b><br>
</div>
<br>

<!-- sce_hd3 -->
<a name="Heading3_2">
<h2>
 2 <!-- hp --><b>グラフィックスアーティストツール</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">PSP&reg;用のグラフィックスデータは、市販のグラフィックス制作ツールを使用して作成した3Dモデルデータ / 2D画像データをコンバータを用いて変換することによって作成します。この章ではSCEが提供するコンバータについて概要を説明します。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_2_1">
<h3>
<a href="#Heading3_2"> 2. </a>1 
<!-- hp1 --><b>GMOコンバータの概要</b><br>
</a>
</h3>
<div style="margin-left:50px;">GMOコンバータは、一般的な3DモデルデータをPSP&reg;用3Dモデルデータに変換するツールです。Windows上で動作し、変換対象のファイルをドラッグ＆ドロップすることで変換を行うことができます。<br>GMOコンバータが対応しているデータ形式は次のとおりです。<br></div>

<!-- sce_title -->
<a Name ="HeadingT_2_1_1">
<div style="margin-left:40px;"><h4><b>入力データ形式</b><br><br></h4></div></a>

</ol>
<div style="margin-left:40px;"><ul>
<li> XSI形式（SOFTIMAGE|XSI：Patchモデルに対応しないなど制限あり）
<li> GMS形式
</ul></div>

<!-- sce_title -->
<a Name ="HeadingT_2_1_2">
<div style="margin-left:40px;"><h4><b>出力データ形式</b><br><br></h4></div></a>

<div style="margin-left:40px;"><ul>
<li> GMO形式
<li> GMS形式
<li> INC形式
</ul></div>
<div style="margin-left:50px;"><br>GMOコンバータには、PSP&reg;用3Dモデルデータのプレビューを行うツールが同梱されています。<br>GMOコンバータの使用方法の詳細は、別ドキュメント「GMO-Converter」を参照してください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_2_2">
<h3>
<a href="#Heading3_2"> 2. </a>2 
<!-- hp1 --><b>GIMコンバータの概要</b><br>
</a>
</h3>
<div style="margin-left:50px;">GIMコンバータは、一般的な画像データをPSP&reg;用2D画像データ（GIM形式）に変換するツールです。<br>GIMコンバータが対応しているデータ形式は次のとおりです。<br></div>

<!-- sce_title -->
<a Name ="HeadingT_2_2_3">
<div style="margin-left:40px;"><h4><b>入力データ形式</b><br><br></h4></div></a>

<div style="margin-left:40px;"><ul>
<li> BMP形式
<li> TGA形式
<li> TM2形式
<li> GIM形式
</ul></div>

<!-- sce_title -->
<a Name ="HeadingT_2_2_4">
<div style="margin-left:40px;"><h4><b>出力データ形式</b><br><br></h4></div></a>

<div style="margin-left:40px;"><ul>
<li> GIM形式
</ul></div>
<div style="margin-left:50px;"><br>GIMコンバータはWindowsのコマンドプロンプトで実行することができます。実行時に複数の入力ファイルを指定することができ、それらをひとつのGIMファイルにまとめることができます。また、GIM形式画像データのプレビューを行うツールが同梱されています。<br><br></div>

<!-- sce_hd3 -->
<a name="Heading3_3">
<h2>
 3 <!-- hp --><b>グラフィックスデータフォーマット</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">PSP&reg;用のグラフィックスデータフォーマットとしては、3DグラフィックスデータをサポートするGMOデータフォーマットと、2DグラフィックスデータをサポートするGIMデータフォーマットがあります。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_1">
<h3>
<a href="#Heading3_3"> 3. </a>1 
<!-- hp1 --><b>GMOデータフォーマットの概要</b><br>
</a>
</h3>
<div style="margin-left:50px;">GMOデータフォーマットは、基本的な3Dモデルの表示を目的としたデータフォーマットです。<br>3Dモデルを表現する情報としては、以下のものをサポートします。<br><br></div>
<div style="margin-left:40px;"><ul>
<li> 階層座標系（行列、TRS）
<li> 形状データ（ポリゴン、曲面、モーフィング、スキンメッシュ）
<li> マテリアル（カラー、マッピング情報）
<li> テクスチャ（ファイル名、ファイルイメージ）
<li> モーション（階層座標系、マテリアルアニメーション）
</ul></div>
<div style="margin-left:50px;"><br>これらの情報は、Bone / Part / Mesh / Arrays / Material / Layer / Texture / Motion / FCurveといったブロック構造で保持されています。<br>これらの3Dモデルデータに加えて、GMOデータフォーマットにはグラフィックスAPIを駆動するためのコマンドデータが含まれ、そのコマンドデータにしたがってAPIを呼び出すことによって3Dモデルを表示できるしくみになっています。また、メモリ上で3DモデルデータにDMAタグを適宜追加してディスプレイリストを構築すると、さらに効率の高い描画処理を行うことができます。<br>GMOデータフォーマットにはバイナリ表現のGMO形式と、テキスト表現のGMS形式があります。両者の内容は同等です。<br>GMOデータフォーマットの詳細については、別ドキュメント「GMO_Format-Overview」「GMO_Format-Reference」を参照してください。<br>なお、GMOデータフォーマットのデータファイルを生成するツールとして、GMOコンバータを提供しています。また、GMO形式のデータを取り扱うライブラリとして、libgmoを提供しています。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_2">
<h3>
<a href="#Heading3_3"> 3. </a>2 
<!-- hp1 --><b>GIMデータフォーマットの概要</b><br>
</a>
</h3>
<div style="margin-left:50px;">GIMデータフォーマットは、基本的なテクスチャ画像を格納するためのファイルフォーマットです。複数の画像を次のような階層構造で格納することができます。<br></div>
<div style="margin-left:67px;"></div>

<div align=center>
<p>
<img src="gif/Graphics-Overview-Japanese002.gif">
</div>
<br>
<div style="margin-left:67px;"><br></div>

<!-- sce_fignum -->
<div align=center>
<p>
<b>図 2  GIMデータフォーマットの階層構造</b><br>
</div>
<br>
<div style="margin-left:50px;">ピクチャチャンクは、ひとつの2Dグラフィックスデータを表します。<br>イメージチャンクにはイメージデータの2次元配列を格納することができます。片方の次元をレベルと呼び、主にミップマップに使用することを想定しています。もう片方の次元はフレームと呼び、主に2Dアニメーションのシーケンスに使用することを想定しています。<br>パレットチャンクにはパレットデータの2次元配列を格納することができ、イメージチャンクに格納したイメージデータの2次元配列に対応します。<br>シーケンスチャンクには、フレームレートをはじめアニメーション表示に関する情報を格納することができます。キーフレームの間隔が可変で、キーフレーム間の補間方式も個別に指定することができます。<br>イメージデータのピクセル形式（カラーモード）としては、（R5,G6,B5） / （R5,G5,B5,A1） / （R4,G4,B4,A4） / （R8,G8,B8,A8） / 4bitインデックスカラー / 8bitインデックスカラー / 16bitインデックスカラー / 32bitインデックスカラーの8種をサポートしています。<br>GIMデータフォーマットの詳細については、別ドキュメント「GIM_Format-Overview」を参照してください。<br>なお、GIMデータフォーマットのデータファイルを生成するツールとして、GIMコンバータを提供しています。また、GIM形式のデータを取り扱うライブラリとして、libgimを提供しています。<br><br></div>

<!-- sce_hd3 -->
<a name="Heading3_4">
<h2>
 4 <!-- hp --><b>グラフィックスライブラリ</b>
<hr noshade>
</h2>


<!-- sce_hd4 -->
<a name="Heading4_4_1">
<h3>
<a href="#Heading3_4"> 4. </a>1 
<!-- hp1 --><b>グラフィックスライブラリの構成</b><br>
</a>
</h3>
<div style="margin-left:50px;">グラフィックス関連ライブラリの構成は以下のようになっています。モデルデータを取り扱うためにlibgmo_model、テクスチャデータを取り扱うためにlibgim_pictureがあり、それらの下位ライブラリとしてlibgum / libgu / gemanがあります。<br><br></div>

<div align=center>
<p>
<img src="gif/Graphics-Overview-Japanese003.gif">
</div>
<br>
<div style="margin-left:50px;"><br></div>

<!-- sce_fignum -->
<div align=center>
<p>
<b>図 3  グラフィックス関連ライブラリの構成</b><br>
</div>
<br>

<!-- sce_hd4 -->
<a name="Heading4_4_2">
<h3>
<a href="#Heading3_4"> 4. </a>2 
<!-- hp1 --><b>Graphics Engineマネージャ(geman)の概要</b><br>
</a>
</h3>
<div style="margin-left:50px;">Graphics Engineマネージャ（geman）は、PSP&reg;の描画エンジンであるGraphics Engineを制御するためのサービスです。ディスプレイリストのキューを管理し、Graphics Engineへの転送をつかさどります。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_4_3">
<h3>
<a href="#Heading3_4"> 4. </a>3 
<!-- hp1 --><b>libguの概要</b><br>
</a>
</h3>
<div style="margin-left:50px;">libguは、Graphics Engineを用いてグラフィックスの描画を行うための基本ライブラリです。Graphics Engineに対する描画パラメータや描画コマンドのシーケンス、つまりディスプレイリストを作成するための関数を中心に、描画の開始 / 中断 / 同期を制御する関数が用意されています。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_4_4">
<h3>
<a href="#Heading3_4"> 4. </a>4 
<!-- hp1 --><b>libgumの概要</b><br>
</a>
</h3>
<div style="margin-left:50px;">libgumは3D演算をサポートするライブラリです。回転 / スケーリング / 透視変換などの行列計算を行う関数とともに、計算結果の行列をlibguで作成しているディスプレイリストに反映する機能を持っています。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_4_5">
<h3>
<a href="#Heading3_4"> 4. </a>5 
<!-- hp1 --><b>libgmoの概要</b><br>
</a>
</h3>
<div style="margin-left:50px;">libgmoは、3Dモデルデータを取り扱うライブラリです。まず第1に、メモリ上に読み込んだGMO形式データイメージを解釈してボーンやパートやマテリアルといったサブブロックを持つモデル構造体に取り込む機能、第2に、モデル構造体をアニメートする（時間による変化を算出する）機能、第3に、libguと連携してモデル構造体をもとにディスプレイリストを作成する機能を提供します。<br>出力に関して、libgmoは描画コマンドシーケンスをlibguに渡すだけの処理を行います。ディスプレイリストの管理と画像出力は、アプリケーション側で適切にlibguを制御して行ってください。<br>libgmoはソースコードが公開されています。必要に応じて改造・機能拡張してください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_4_6">
<h3>
<a href="#Heading3_4"> 4. </a>6 
<!-- hp1 --><b>libgimの概要</b><br>
</a>
</h3>
<div style="margin-left:50px;">libgimはテクスチャとして使用する2Dグラフィックスデータを取り扱うライブラリです。まず第1に、2Dグラフィックスデータファイルの内容を解釈してイメージ / パレットといったサブブロックを持つピクチャ構造体に取り込む機能、第2に、ピクチャ構造体をアニメートする（時間による変化を算出する）機能、第3に、libguと連携してピクチャ構造体をもとにディスプレイリストを作成しテクスチャを設定する機能を提供します。また、フレームレートの低いピクチャを補間して滑らかに動かすためのディゾルブ機能、不定形サイズのイメージデータを扱いやすくするためのイメージクロップ機能も特徴です。<br>出力に関して、libgim_pictureはテクスチャを設定する描画コマンドシーケンスをlibguに渡すだけの処理を行います。ディスプレイリストの管理と画像出力は、アプリケーション側でモデルの描画処理と合わせて、適切にlibguを制御して行ってください。<br>libgimはソースコードが公開されています。必要に応じて改造・機能拡張してください。<br><br></div>
<p><p><hr>
<div ALIGN="right">
    &copy;2005 Sony Computer Entertainment Inc.  All Rights Reserved.<br>
    SCE CONFIDENTIAL
</div>
</body>
</html>
