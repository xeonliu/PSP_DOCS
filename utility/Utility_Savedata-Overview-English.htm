<html lang="en">
<head>
<title>Utility_Savedata-Overview</title>
<meta http-equiv="Content-Type" content= text/html; charset=iso-8859-1>
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta http-equiv="Content-Style-Type" content="Text/css>
<meta name="Author"Content=" Sony Computer Entertainment Inc.">
</head>
<body bgcolor="#ffffff" text="#000000" >
<a name=TOP></a>
<table WIDTH="100%">
<tr><td>
<h3>PSP&trade; Programmer Tool Runtime Library Release 6.3.0</h3>
</td>
</tr>
</table>
<hr noshade size=6>
<center><h1>
Save Data Utility Overview
</h1></center>
</a>
<!-- sce_hd1 -->

<!-- sce_hd3 -->
<a name="Heading3_1">
<h2>
 1 <!-- hp --><b>About the Utility</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">For an overview of the utility, refer to the Utility Services Overview document.<br><br></div>

<!-- sce_hd3 -->
<a name="Heading3_2">
<h2>
 2 <!-- hp --><b>Save Data Structure</b>
<hr noshade>
</h2>


<!-- sce_hd4 -->
<a name="Heading4_2_1">
<h3>
<a href="#Heading3_2"> 2. </a>1 
<!-- hp1 --><b>Directory/File Organization</b><br>
</a>
</h3>
<div style="margin-left:50px;">The directory/file organization on a Memory Stick&trade; is shown below.<br></div>

<div align=center>
<p>
<img src="gif/Utility_Savedata-Overview-English001.gif">
</div>
<br>
<div style="margin-left:50px;"><br>(*) The creation of files or directories not included in the above configuration is prohibited.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_2_2">
<h3>
<a href="#Heading3_2"> 2. </a>2 
<!-- hp1 --><b>Save Data Directory savedata_dir</b><br>
</a>
</h3>
<div style="margin-left:50px;">The simple concatenation of the product number (title ID) and user ID is set as the directory name.<br>(For information about product number and user ID specifications, refer to the Save Data Utility Reference document.)<br></div>

<!-- sce_hd4 -->
<a name="Heading4_2_3">
<h3>
<a href="#Heading3_2"> 2. </a>3 
<!-- hp1 --><b>PARAM.SFO</b><br>
</a>
</h3>
<div style="margin-left:50px;">The utility automatically creates this file. It contains text data such as file names, parameters such as the parental lock level, and a list of protected data files.<br>Since this file is protected, a game program cannot directly change it.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_2_4">
<h3>
<a href="#Heading3_2"> 2. </a>4 
<!-- hp1 --><b>Content Information Files</b><br>
</a>
</h3>

<!-- sce_title -->
<a Name ="HeadingT_2_4_1">
<div style="margin-left:40px;"><h4><b>What Are Content Information Files?</b><br><br></h4></div></a>

<div style="margin-left:67px;">Images, video, and background music that are represented to typify the save data content are called content information. Content information is mainly used by PSP&trade; system software and utilities to display lists.<br></div>

<!-- sce_title -->
<a Name ="HeadingT_2_4_2">
<div style="margin-left:40px;"><h4><b>File Configuration</b><br><br></h4></div></a>

<div style="margin-left:67px;">Content information consists of multiple files.<br></div>
</ul>
<div style="margin-left:70px;"><ul>
<li> Still image icon: ICON0.PNG
<li> Animated image icon: ICON1.PMF
<li> Content information background graphic: PIC1.PNG
<li> Background music: SND0.AT3
</ul></div>

<!-- sce_title -->
<a Name ="HeadingT_2_4_3">
<div style="margin-left:40px;"><h4><b>Still Image Icon</b><br><br></h4></div></a>

<div style="margin-left:67px;">The still image icon is displayed as an alternate icon when the focus is not aligned on content, when the animated image icon cannot be displayed, or when no animated image icon has been set.<br>This is a required file. Be sure to create it.<br></div>
<div style="margin-left:70px;"><ul>
<li> Image size: 144x80 pixels
<li> Image format: PNG (24bit)
<li> File name: ICON0.PNG
<li> Creation tool: Use a commercially available tool.
</ul></div>

<!-- sce_title -->
<a Name ="HeadingT_2_4_4">
<div style="margin-left:40px;"><h4><b>Animated Image Icon</b><br><br></h4></div></a>

<div style="margin-left:67px;">An animation can be displayed as an icon. The animation can be displayed with or without sound.<br>When the animation ends, it will start again from the beginning, but the sound may be intermittent. To play sound in a loop without breaks, use background music. However, note that background music will not be synchronized with the icon. When an animation with sound has background music, only the background music will be played for sound.<br>This is treated as optional and can be omitted when not needed.<br>An animated image icon is played by PSP&trade; system software and is not played by the utility.<br></div>
<div style="margin-left:70px;"><ul>
<li> Image size: 144x80 pixels
<li> Video<br>Format: IDR-Picture and P-Picture encoded only with AVC <br>    	(Main Profile level 2.1 (maximum bit rate: 4.8Mbps)) (*) Similar to the<br> 	format for games <br>Frame rate: 29.97 fps progressive
<li> Audio<br>Format: ATRAC3plus&trade;<br>Sampling frequency: 44.1kHz<br>Channels: 2 channel stereo
<li> Multiplexing format: PSMF
<li> File size: Max. 500 kilobytes including background music file
<li> File name: ICON1.PMF
<li> Creation tool: Use the SCE UMD&trade; Stream Composer (for Game Movie) and PSMF Composer.
</ul></div>

<!-- sce_title -->
<a Name ="HeadingT_2_4_5">
<div style="margin-left:40px;"><h4><b>Content Information Background</b><br><br></h4></div></a>

<div style="margin-left:67px;">This is a graphic that is used as the background.<br>It is treated as optional and may be omitted when not needed.<br>The content information background is displayed by PSP&trade; system software and is not displayed by the utility.<br></div>
<div style="margin-left:70px;"><ul>
<li> Image size: 480x272 pixels
<li> Image format: PNG (24bit)
<li> File name: PIC1.PNG
<li> Creation tool: Use a commercially available tool.
</ul></div>

<!-- sce_title -->
<a Name ="HeadingT_2_4_6">
<div style="margin-left:40px;"><h4><b>Background Music (BGM) </b><br><br></h4></div></a>

<div style="margin-left:67px;">This is an audio file. If a loop range is specified, the music can be played in a loop without breaks. It is treated as optional and may be omitted when not needed.<br>Background music is played by PSP&trade; system software and is not played by the utility.<br></div>
<div style="margin-left:70px;"><ul>
<li> Audio format:<br>Format: ATRAC3plus&trade;<br>Sampling frequency: 44.1kHz<br>Channels: 2 channel stereo
<li> File size: Max. 500 kilobytes including animated image icon file
<li> File name: SND0.AT3
<li> Creation tool: Use the SCE at3tool.
</ul></div>

<!-- sce_hd4 -->
<a name="Heading4_2_5">
<h3>
<a href="#Heading3_2"> 2. </a>5 
<!-- hp1 --><b>Data Files gamedata_file…</b><br>
</a>
</h3>

<!-- sce_title -->
<a Name ="HeadingT_2_5_7">
<div style="margin-left:40px;"><h4><b>File Name Constraints</b><br><br></h4></div></a>

<div style="margin-left:67px;">Some constraints apply to data file names. These constraints are the same for protected and unprotected files.<br></div>
<div style="margin-left:70px;"><ul>
<li> Length: 8.3 format
<li> Characters that can be used: A - Z and 0 - 9
</ul></div>
<div style="margin-left:67px;">Also, the following names are reserved by the system and should not be used.<br></div>
<div style="margin-left:70px;"><ul>
<li> *.SFO
<li> ICON*.*
<li> PIC*.*
<li> SND*.*
</ul></div>
<div style="margin-left:67px;">The asterisk (*) means any number of arbitrary characters.<br>The utility checks the file name when it is passed as a parameter and returns an error if the name is illegal.<br></div>

<!-- sce_hd3 -->
<a name="Heading3_3">
<h2>
 3 <!-- hp --><b>[Important] Differences in the Save Data Format Depending on the Runtime Library Version</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">The format of save data generated by a game program differs a little depending on the version of the Runtime Library.<br></div>
</ol>
<div style="margin-left:40px;"><ul>
<li> Old format 1:	Format of Runtime Library Releases 1.0.3, 1.5.0, and 1.5.2
<li> Old format 2: 	Format of Runtime Library Releases 2.0.0, 2.5.0, and 2.6.0
<li> New format: 	Format of Runtime Library Release 2.7.1 or later (version of this document)
</ul></div>
<div style="margin-left:50px;">Old format 2 and the new format enable more secure encoding to be performed by specifying an ID for accessing a protected data file. The encoding method is also different for each of these formats.<br>A game program that was created with Release 1.5.2 or earlier, which handles old format 1, cannot read old format2 or the new format. Also, a game program that was created with Releases 2.0.0 to 2.6.0, which handles old format 2, cannot read the new format.<br>Therefore, when a game that can handle the new format overwrites old format 1 or old format 2 save data of the game, it must save it using the same format.<br>To access old format save data, a specification indicating that the data is in the old format must be made for the utility.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_1">
<h3>
<a href="#Heading3_3"> 3. </a>1 
<!-- hp1 --><b>Note</b><br>
</a>
</h3>
<div style="margin-left:50px;">As long as there is no specific reason to do so, creating and using save data with the old format is prohibited. Always use new format save data.<br>If old format save data must be accessed, contact SCE.<br><br></div>

<!-- sce_hd3 -->
<a name="Heading3_4">
<h2>
 4 <!-- hp --><b>Protection and Binding</b>
<hr noshade>
</h2>


<!-- sce_hd4 -->
<a name="Heading4_4_1">
<h3>
<a href="#Heading3_4"> 4. </a>1 
<!-- hp1 --><b>Save Data Protection</b><br>
</a>
</h3>
<div style="margin-left:50px;">If the utility detects an illegal data change in PARAM.SFO or a protected data file when loading save data, it returns an error and does not load the data.<br></div>

<!-- sce_title -->
<a Name ="HeadingT_4_1_8">
<div style="margin-left:40px;"><h4><b>Note</b><br><br></h4></div></a>

<div style="margin-left:67px;">This type of error cannot be detected for an unprotected data file. If an unprotected data file inevitably must be used, be sure that the game program takes sufficient measures such as performing independent encoding or strict checking.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_4_2">
<h3>
<a href="#Heading3_4"> 4. </a>2 
<!-- hp1 --><b>Protected Data File ID</b><br>
</a>
</h3>
<div style="margin-left:50px;">(This function is provided beginning with Runtime Library Release 2.00)<br>As a further measure for protecting against illegal data changes, an ID is now required for accessing a protected data file.<br>The ID is required when reading/writing a protected data file. Since the same utility type may or may not access protected data files, whether or not the ID is necessary is determined according to whether or not protected data files are to be accessed.<br>When reading a protected data file, be sure to specify the same ID as the one that was specified when the file was written. If the IDs differ, an illegal data error will occur, and the file will not be able to be read.<br>When a file is overwritten, the existing file ID is not checked. Like the file, the ID is also simply overwritten. Although several IDs may be used within a game program, the range in which IDs can be separately specified differs according to the type of utility.<br>For list-selection type, the same ID is used for accessing all list-specified save data.<br>For types supporting multiple calls, individual IDs can be distinguished for each protected data file that is contained in one set of save data.<br></div>

<!-- sce_title -->
<a Name ="HeadingT_4_2_9">
<div style="margin-left:40px;"><h4><b>Restrictions on Setting Values</b><br><br></h4></div></a>

<div style="margin-left:67px;">An ID is a 16-byte binary value. The following restrictions apply.<br></div>
<div style="margin-left:40px;"><ul>
<li> An ID consisting of all zeros is prohibited. If this is specified, the utility will return an error.
<li> Avoid using all ASCII character codes. (This will not cause a utility error.)
<li> Avoid using all the same value. For example, avoid 0xff for all 16 bytes. (This will not cause a utility error.)
</ul></div>

<!-- sce_title -->
<a Name ="HeadingT_4_2_10">
<div style="margin-left:40px;"><h4><b>Note</b><br><br></h4></div></a>

<div style="margin-left:67px;">If the ID is lost, the file will not be able to be completely read. Do not make specifications in which multiple IDs are used and there is a risk that some IDs are lost such as when writing to a file.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_4_3">
<h3>
<a href="#Heading3_4"> 4. </a>3 
<!-- hp1 --><b>Binding</b><br>
</a>
</h3>
<div style="margin-left:50px;">Save data is created by using a binding (association) mechanism.<br></div>

<!-- sce_title -->
<a Name ="HeadingT_4_3_11">
<div style="margin-left:40px;"><h4><b>Console Binding</b><br><br></h4></div></a>

<div style="margin-left:67px;">When save data is read on a PSP&trade; other than the PSP&trade; where that save data was saved, the PSP&trade; can tell that the data was saved on another PSP&trade; according to the return value of the utility. <br>Since the save data is read normally even if it was saved on another PSP&trade;, how the console binding return value is used is left to the game program. The game program can determine whether or not save data that was saved on another PSP&trade; is valid according to this information.<br></div>

<!-- sce_title -->
<a Name ="HeadingT_4_3_12">
<div style="margin-left:40px;"><h4><b>Save Data Duplication</b><br><br></h4></div></a>

<div style="margin-left:67px;">The utility cannot detect the duplication of save data.<br>Save data can be duplicated by other hardware such as a PC.<br>Although the PSP&trade; system software has a built-in save data copy function, it does not differ from duplication on a PC. Therefore, even if save data is copied by a different PSP&trade; than the one where the data was saved, the console binding information is not changed to that of the PSP&trade; where the data was copied.<br><br></div>

<!-- sce_hd3 -->
<a name="Heading3_5">
<h2>
 5 <!-- hp --><b>Save Data Utility Overview</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">The Save Data utility is a utility for loading, saving, deleting, and performing operations related to save data.<br>A game program must use the utility to save the save data on a Memory Stick&trade; or to read the save data from a Memory Stick&trade;.<br></div>

<!-- sce_hd3 -->
<a name="Heading3_6">
<h2>
 6 <!-- hp --><b>Types</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">The Save Data utility can be started up using various types for different uses.<br>These types can be broadly divided into single call types and types that support multiple calls.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_6_1">
<h3>
<a href="#Heading3_6"> 6. </a>1 
<!-- hp1 --><b>Single Call Types</b><br>
</a>
</h3>
<div style="margin-left:50px;">A single call type can be used when one operation on the save data is completed with one call of the utility. For example, it can be used when the loading or saving of save data is completed with one call.<br>For these types, the data file structure for save data is restricted.<br></div>

<!-- sce_hd6 -->
<a name="Heading6_6_1_1">
<div style="margin-left:63px;"><h4><b>Data File Structure Restrictions for Single Call Types</b><br><br></h4></a></div>
<div style="margin-left:50px;"></div>

<div style="margin-left:67px;">
<p>
<img src="gif/Utility_Savedata-Overview-English002.gif">
</div>
<div style="margin-left:50px;"><br></div>
<div style="margin-left:80px;">As shown in the figure, only one protected data file can be saved.<br><br></div>
<div style="margin-left:50px;">Some single call types include functions that present a confirmation screen to the user. Other single call types, which are used for auto saving or auto loading, have no screen displays.<br></div>

<!-- sce_hd6 -->
<a name="Heading6_6_1_2">
<div style="margin-left:63px;"><h4><b>Types With Screen Displays</b><br><br></h4></a></div>
</ul>
<div style="margin-left:70px;"><ul>
<li> Fixed loading
<li> Fixed saving
<li> Fixed deletion
<li> List-selection loading
<li> List-selection saving
<li> List-selection deletion
<li> All save data based-selection deletion
</ul></div>

<!-- sce_hd6 -->
<a name="Heading6_6_1_3">
<div style="margin-left:63px;"><h4><b>Types With No Screen Displays</b><br><br></h4></a></div>
<div style="margin-left:70px;"><ul>
<li> Auto loading
<li> Auto saving
<li> Auto deletion
<li> Getting the Memory Stick&trade; free space and save data size
</ul></div>

<!-- sce_hd4 -->
<a name="Heading4_6_2">
<h3>
<a href="#Heading3_6"> 6. </a>2 
<!-- hp1 --><b>Types Supporting Multiple Calls</b><br>
</a>
</h3>
<div style="margin-left:50px;">In contrast to single call types, types supporting multiple calls have no restrictions concerning the data files that constitute the save data.<br>Since multiple utility calls may be required for one operation on the save data (game data saving or loading), there are types that support this.<br>These types have no accompanying screen displays.<br></div>

<!-- sce_hd6 -->
<a name="Heading6_6_2_1">
<div style="margin-left:63px;"><h4><b>Types With No Screen Displays</b><br><br></h4></a></div>
<div style="margin-left:70px;"><ul>
<li> Save data creation (protected data file can be created)
<li> Protected data file writing
<li> Protected data file reading
<li> Protected data file deletion
<li> Save data deletion
<li> Getting save data user ID list 
<li> Getting file list 
<li> Save data saving decision
</ul></div>

<!-- sce_hd6 -->
<a name="Heading6_6_2_2">
<div style="margin-left:63px;"><h4><b>Types That Support Unprotected Data Files<sup> (*) </sup> (With No Screen Displays)</b><br><br></h4></a></div>
<div style="margin-left:70px;"><ul>
<li> Save data creation (unprotected data files can be created)
<li> Unprotected data file writing
<li> Unprotected data file reading
<li> Unprotected data file deletion
</ul></div>
<div style="margin-left:80px;">Care is required when handling unprotected data files.<br></div>

<!-- sce_hd3 -->
<a name="Heading3_7">
<h2>
 7 <!-- hp --><b>Single Call Type Specifications</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">A single call type is used when operations on save data (game data saving or loading) can be completed normally with one utility call.<br>Only one protected data file can be created. It is also possible not to create any protected data file.<br>Although you can use a single call type together with a type supporting multiple calls, be sure you understand the utility specifications and be sufficiently careful concerning the save data file configuration.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_7_1">
<h3>
<a href="#Heading3_7"> 7. </a>1 
<!-- hp1 --><b>Types With Screen Displays</b><br>
</a>
</h3>
<div style="margin-left:50px;">The user is asked for confirmation according to a screen display.<br>If the Memory Stick&trade; has not been removed, a message is displayed and processing waits until the Memory Stick&trade; is removed. (The user can also cancel the operation.)<br>If an error occurs, it is reported to the user on the screen.<br>If the user cancels the operation or utility processing cannot continue, an error is returned to the game program.<br>The following types are types with screen displays.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_7_2">
<h3>
<a href="#Heading3_7"> 7. </a>2 
<!-- hp1 --><b>Fixed Loading</b><br>
</a>
</h3>
<div style="margin-left:50px;">The specified save data is loaded.<br>There is only one save data specification.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_7_3">
<h3>
<a href="#Heading3_7"> 7. </a>3 
<!-- hp1 --><b>Fixed Saving</b><br>
</a>
</h3>
<div style="margin-left:50px;">The specified save data is saved.<br>There is only one save data specification.<br>If save data having the same name already exists, the save data is saved by overwriting the existing data.<br>Whether data is to be overwritten or new data is to be created cannot be specified.<br>Whether the data was overwritten or new data was created cannot be acquired.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_7_4">
<h3>
<a href="#Heading3_7"> 7. </a>4 
<!-- hp1 --><b>Fixed Deletion</b><br>
</a>
</h3>
<div style="margin-left:50px;">The specified save data is deleted from each directory.<br>There is only one save data specification.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_7_5">
<h3>
<a href="#Heading3_7"> 7. </a>5 
<!-- hp1 --><b>List-Selection Loading</b><br>
</a>
</h3>
<div style="margin-left:50px;">Multiple save data are specified in a list and one of them is loaded.<br>Up to 1024 save data can be specified.<br>The Memory Stick&trade; is searched and only the save data that have actually been saved among the multiple specified save data are displayed in a list on the screen.<br>The save data on which the focus is first to be aligned when the list is displayed can be specified.<br>One of the save data selected by the user is loaded. Multiple selections cannot be made.<br>Information about the save data that was actually loaded is returned.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_7_6">
<h3>
<a href="#Heading3_7"> 7. </a>6 
<!-- hp1 --><b>List-Selection Saving</b><br>
</a>
</h3>
<div style="margin-left:50px;">Multiple save data are specified in a list and one save data among them is saved. <br>Up to 1024 save data can be specified.<br>The Memory Stick&trade; is searched and among the multiple specified save data, the save data that have actually been saved are displayed as existing save data in a list on the screen and the save data that have not been saved are displayed as new save data.<br>The save data on which the focus is first to be aligned when the list is displayed can be specified.<br>One of the save data selected by the user is saved. Multiple selections cannot be made.<br>If existing save data was selected, the save data is saved by overwriting the existing data after receiving confirmation by the user.<br>Whether data is to be overwritten or new data is to be created cannot be specified.<br>Whether the data was overwritten or new data was created cannot be acquired.<br>Information about the save data that was actually saved is returned.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_7_7">
<h3>
<a href="#Heading3_7"> 7. </a>7 
<!-- hp1 --><b>List-Selection Deletion</b><br>
</a>
</h3>
<div style="margin-left:50px;">Multiple save data are specified in a list and the data that was selected by the user from among them is deleted from each directory.<br>Up to 1024 save data can be specified.<br>The Memory Stick&trade; is searched and among the multiple specified save data, only save data that have actually been saved are displayed as a list on the screen.<br>The save data on which the focus is first to be aligned when the list is displayed can be specified.<br>Multiple save data can be deleted by repeatedly performing deletion.<br>Besides deleting save data, detailed information about save data or the amount of free space on the Memory Stick&trade; can also be confirmed.<br>Since multiple deletions are supported, no information about save data that was actually deleted is returned.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_7_8">
<h3>
<a href="#Heading3_7"> 7. </a>8 
<!-- hp1 --><b>All Save Data Based-Selection Deletion</b><br>
</a>
</h3>
<div style="margin-left:50px;">All save data that have been saved on the Memory Stick&trade; are displayed in a list, and save data that were selected by the user are deleted from each directory.<br>Multiple save data can be deleted by repeatedly performing deletion.<br>Besides deleting save data, detailed information about save data or the amount of free space on the Memory Stick&trade; can also be confirmed.<br>Since multiple deletions are supported, no information about save data that was actually deleted is returned.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_7_9">
<h3>
<a href="#Heading3_7"> 7. </a>9 
<!-- hp1 --><b>Types With No Screen Displays</b><br>
</a>
</h3>
<div style="margin-left:50px;">No screens are displayed at all.<br>If utility processing cannot continue, an error value is returned to the game program.<br>The game program must display a suitable error message.<br>The Message Dialog Utility can be used for displaying error messages. For details, see "Error Dialog Screen Displays."<br>The following types have no screen displays.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_7_10">
<h3>
<a href="#Heading3_7"> 7. </a>10 
<!-- hp1 --><b>Fixed Auto Loading</b><br>
</a>
</h3>
<div style="margin-left:50px;">The specified save data is loaded.<br>There is only one save data specification.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_7_11">
<h3>
<a href="#Heading3_7"> 7. </a>11 
<!-- hp1 --><b>Fixed Auto Saving</b><br>
</a>
</h3>
<div style="margin-left:50px;">The specified save data is saved.<br>There is only one save data specification.<br>If save data having the same name already exists, the save data is saved by overwriting the existing data.<br>Whether data is to be overwritten or new data is to be created cannot be specified.<br>Whether the data was overwritten or new data was created cannot be acquired.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_7_12">
<h3>
<a href="#Heading3_7"> 7. </a>12 
<!-- hp1 --><b>Fixed Auto Deletion</b><br>
</a>
</h3>
<div style="margin-left:50px;">The specified save data is deleted from each directory.<br>There is only one save data specification.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_7_13">
<h3>
<a href="#Heading3_7"> 7. </a>13 
<!-- hp1 --><b>Getting the Memory Stick&trade; Free Space And Save Data Size </b><br>
</a>
</h3>
<div style="margin-left:50px;">The Memory Stick&trade; free space, the size of the save data that has been saved on the <br>Memory Stick&trade;, and the expected size when the save data that is in the memory specified for the utility is saved on the Memory Stick&trade; can be obtained.<br>The sizes take into consideration the cluster size.<br>Strings with units can be obtained for creating equivalent displays as the PSP&trade; system software.<br>The sizes that can be obtained are sizes for which the cluster size that can be used in package and other notation is fixed at 32K.<br><br></div>

<!-- sce_hd3 -->
<a name="Heading3_8">
<h2>
 8 <!-- hp --><b>Specifications of Types Supporting Multiple Calls</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">A type supporting multiple calls is used when multiple utility calls are required to complete one operation on save data (game data saving or loading).<br>This type has a mechanism (state or status) for supporting multiple calls.<br>Since they are all auto types, they do not display any confirmation messages or reports for the user at all.<br>Although save data specifications for (single call type) fixed and auto types are the same, since multiple utilities are called, multiple save data can also be accessed by specifying each save data separately.<br>If the utility processing cannot continue because no Memory Stick&trade; has been inserted, processing was canceled by the user, or an error occurred, an error value is returned to the game program.<br>The game program must display a suitable error message.<br>The Message Dialog Utility can be used for displaying error messages. For details, see "Error Dialog Screen Displays."<br>Although you can use a type supporting multiple calls together with a single call type, be sure you understand the utility specifications and be sufficiently careful concerning the save data file configuration.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_8_1">
<h3>
<a href="#Heading3_8"> 8. </a>1 
<!-- hp1 --><b>Save Data Creation (Protected Data Files Can be Created)</b><br>
</a>
</h3>
<div style="margin-left:50px;">Save data is created.<br><b>[Note] If save data having the same name already exists, it is deleted and new save data is created.</b><br>Only one protected data file can be created at the same time.<br>Save data can also be created without a data file.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_8_2">
<h3>
<a href="#Heading3_8"> 8. </a>2 
<!-- hp1 --><b>Protected Data File Writing</b><br>
</a>
</h3>
<div style="margin-left:50px;">A protected data file is added to existing save data.<br>If save data is determined to be illegal, an error occurs.<br>If a file having the same name already exists, that file is overwritten.<br>The number of protected data files is limited (up to 99). If an attempt is made to add a protected data file that would exceed this limit, an error occurs.<br>The PARAM.SFO parameter file or a content information file cannot be changed at the same time.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_8_3">
<h3>
<a href="#Heading3_8"> 8. </a>3 
<!-- hp1 --><b>Protected Data File Reading</b><br>
</a>
</h3>
<div style="margin-left:50px;">A protected data file is read from existing save data.<br>If save data is determined to be illegal, an error occurs.<br>The PARAM.SFO parameter file or a content information file cannot be read at the same time.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_8_4">
<h3>
<a href="#Heading3_8"> 8. </a>4 
<!-- hp1 --><b>Protected Data File Deletion</b><br>
</a>
</h3>
<div style="margin-left:50px;">A protected data file is deleted from existing save data.<br>If save data is determined to be illegal, an error occurs.<br>The PARAM.SFO parameter file or a content information file cannot be changed at the same time.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_8_5">
<h3>
<a href="#Heading3_8"> 8. </a>5 
<!-- hp1 --><b>Save Data Deletion</b><br>
</a>
</h3>
<div style="margin-left:50px;">Save data is deleted from each directory.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_8_6">
<h3>
<a href="#Heading3_8"> 8. </a>6 
<!-- hp1 --><b>Getting Save Data User ID List</b><br>
</a>
</h3>
<div style="margin-left:50px;">A list of save data (list of user ID parts) is obtained.<br>The list can be obtained by specifying a wildcard for the user ID part.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_8_7">
<h3>
<a href="#Heading3_8"> 8. </a>7 
<!-- hp1 --><b>Getting File List</b><br>
</a>
</h3>
<div style="margin-left:50px;">A list of files that constitute the specified save data is obtained.<br>Although a wildcard cannot be specified for the file name, the type of file to be obtained (PARAM.SFO and content information file, protected data file, or unprotected data file) can be specified.<br>An upper limit for the number of items in the file list can be specified individually for each type.<br>Entries that are inappropriate as files that constitute the save data (such as illegal file names, names that are used as system reserved names, or directories) are not reported.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_8_8">
<h3>
<a href="#Heading3_8"> 8. </a>8 
<!-- hp1 --><b>Save Data Saving Decision</b><br>
</a>
</h3>
<div style="margin-left:50px;">This type decides whether or not save data can be saved on the Memory Stick&trade;.<br>If save data that is expected to be saved later, which consists of parameters assigned in the utility, is expected to be saved on the Memory Stick&trade; that is currently inserted, a check of whether or not there is sufficient free space is made.<br>The insufficient amount of space is returned only when there is insufficient free space. (Zero is returned if there is sufficient free space.)<br>Situations in which save data having the same name (or files constituting that save data) already exist are also taken into consideration. In such cases, the amount of insufficient space is obtained for the following two conditions.<br></div>
<div style="margin-left:70px;"><ul>
<li> If only files that are to be overwritten are updated
<li> If the save data is to be deleted and new save data is to be created
</ul></div>

<!-- sce_title -->
<a Name ="HeadingT_8_8_13">
<div style="margin-left:40px;"><h4><b>Data File List</b><br><br></h4></div></a>

<div style="margin-left:67px;">A list of the data files that constitute the save data is passed to the utility.<br>The size (in bytes) of each file is required.<br><b>The list is created in the order the files are to be saved so that the decision is made correctly.</b><br>Although the files need not be sorted in terms of size, when files are to be overwritten, the free space on the Memory Stick&trade; can be used more efficiently if the files are written in order from the smallest to the largest.<br>Files other than data files are handled as follows.<br>PARAM.SFO ... List specification is unnecessary since the size is calculated automatically.<br>Content information files ... Specified separately from the data file list. (See the Save Data Utility Reference document.)<br></div>

<!-- sce_hd6 -->
<a name="Heading6_8_8_1">
<div style="margin-left:63px;"><h4><b>About Size 0</b><br><br></h4></a></div>
<div style="margin-left:80px;">A file for which the list size is set to 0 represents a file that is not deleted but has size 0.<br>A deleted file cannot be specified.<br></div>
<div style="margin-left:70px;"><ul>
<li> When updating save data, a decision to save "when updating only files that are overwritten" cannot be made when using specifications that require both the deletion and addition (resizing) of data files. Note that a saving decision is unnecessary when only the deletion of a file completes its updating.
</ul></div>

<!-- sce_title -->
<a Name ="HeadingT_8_8_1_14">
<div style="margin-left:40px;"><h4><b>Data File Saving Order</b><br><br></h4></div></a>

<div style="margin-left:67px;">Although you need not worry about the data file saving order when deleting and creating new save data, the order in which the data files are saved once the decision is made is important when updating only files that are to be overwritten. (The reason is explained in the next section entitled "Internal Operation of Saving Decision Processing When Overwriting."<br>The save data saving decision type makes decisions in the following order.<br></div>
</ol>
<div style="margin-left:55px;"><ol>
<li VALUE=1> Directory size</li>
<li VALUE=2> Content information files (ICON0.PNG, ICON1.PMF, PIC1.PNG, SND0.AT3)</li>
<li VALUE=3> Unprotected data file list order</li>
<li VALUE=4> Protected data file list order</li>
<li VALUE=5> PARAM.SFO</li>
</ol></div>
<div style="margin-left:67px;">To actually update the data files by using the file addition type after the saving decision type is called, be sure to update them in the specified file list order.<br>Since the content information files are decided before the data files, updating is performed by the type for which updating can be performed first among the sequence of utilities that are called continuously.<br></div>

<!-- sce_title -->
<a Name ="HeadingT_8_8_1_15">
<div style="margin-left:40px;"><h4><b>Internal Operation of Saving Decision Processing When Overwriting</b><br><br></h4></div></a>

<div style="margin-left:67px;">For example, the decision is made as follows when overwriting. <br><br></div>

<div style="margin-left:67px;">
<p>
<img src="gif/Utility_Savedata-Overview-English003.gif">
</div>
<div style="margin-left:67px;"><br><br>If the files are written in the order FILE A &rarr; FILE B &rarr; ... &rarr; FILE F, the number of clusters that the size increases or decreases if an existing file is overwritten is found and the way in which the amount of free space varies each time is calculated.<br>It is apparent that space may be insufficient for an intermediate increase even if free space ultimately exists. The file saving order is important.<br>For the case shown above, the saving decision type returns the following.<br></div>
</ol>
<div style="margin-left:70px;"><ul>
<li> When overwriting only files having the same name: Insufficient by 3 clusters
<li> When deleting and creating new data: Data can be saved
</ul></div>
<div style="margin-left:67px;">(*) The directory size difference is easily obtained by: <br>(size due to the number of files after overwriting) - (size due to the number of files before overwriting) <br>The error due to this method is ignored.<br>(*) No saving decision is necessary when the sizes of protected data files, unprotected data files, and content information files are all less than or equal to the current sizes.<br></div>

<!-- sce_hd3 -->
<a name="Heading3_9">
<h2>
 9 <!-- hp --><b>Types That Support Unprotected Data Files</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">The types that support unprotected data files are the unprotected data file versions of types supporting multiple calls.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_9_1">
<h3>
<a href="#Heading3_9"> 9. </a>1 
<!-- hp1 --><b>[Important]  Precautions During Use</b><br>
</a>
</h3>
<div style="margin-left:50px;">Tampering with unprotected data files cannot be detected by the utility. The game program must determine this. Depending on how these files are used, there is a risk of a severe security breach in the PSP&trade; system, not just in the game program.<br>Except when unprotected data files are absolutely required by the game specifications, you should always use protected data files.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_9_2">
<h3>
<a href="#Heading3_9"> 9. </a>2 
<!-- hp1 --><b>Save Data Creation (Unprotected Data Files Can be Created)</b><br>
</a>
</h3>
<div style="margin-left:50px;">Save data is created.<br><b>[Note] If save data having the same name already exists, it is deleted and new save data is created.</b><br>Only one unprotected data file can be created at the same time.<br>Save data can also be created without a data file.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_9_3">
<h3>
<a href="#Heading3_9"> 9. </a>3 
<!-- hp1 --><b>Unprotected Data File Writing</b><br>
</a>
</h3>
<div style="margin-left:50px;">An unprotected data file is added to existing save data.<br>If no save data exists, an error occurs.<br>If a file having the same name already exists, that file is overwritten.<br>The PARAM.SFO parameter file or a content information file cannot be changed at the same time.<br>If an attempt is made to overwrite an existing protected data file by an unprotected data file having the same name, no error occurs and the existing file is directly overwritten. The same thing happens when an attempt is made to overwrite an existing unprotected data file by a protected data file. Although no error occurs, you should avoid this kind of use.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_9_4">
<h3>
<a href="#Heading3_9"> 9. </a>4 
<!-- hp1 --><b>Unprotected Data File Reading</b><br>
</a>
</h3>
<div style="margin-left:50px;">An unprotected data file is read from existing save data.<br>If no save data exists, an error occurs.<br>The PARAM.SFO parameter file or a content information file cannot be read at the same time.<br>No error is returned if a protected data file is read as an unprotected data file. However, since the contents that were read cannot be used, you should avoid this kind of use.<br>In contrast, an error is returned if an attempt is made to read an unprotected data file as a protected data file.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_9_5">
<h3>
<a href="#Heading3_9"> 9. </a>5 
<!-- hp1 --><b>Unprotected Data File Deletion</b><br>
</a>
</h3>
<div style="margin-left:50px;">An unprotected data file is deleted from existing save data.<br>If no save data exists, an error occurs.<br>The PARAM.SFO parameter file or a content information file cannot be changed at the same time.<br>If an attempt is made to delete a protected data file as an unprotected data file, no error occurs and the file is deleted. The same thing happens when an attempt is made to delete an unprotected data file as a protected data file. Although no error occurs, you should avoid this kind of use.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_9_6">
<h3>
<a href="#Heading3_9"> 9. </a>6 
<!-- hp1 --><b>Save Data Deletion</b><br>
</a>
</h3>
        <div style="margin-left:80px;"><pre><font size=3>
</font></pre></div>

<!-- sce_hd4 -->
<a name="Heading4_9_7">
<h3>
<a href="#Heading3_9"> 9. </a>7 
<!-- hp1 --><b>Getting Save Data User ID List</b><br>
</a>
</h3>
        <div style="margin-left:80px;"><pre><font size=3>
</font></pre></div>

<!-- sce_hd4 -->
<a name="Heading4_9_8">
<h3>
<a href="#Heading3_9"> 9. </a>8 
<!-- hp1 --><b>Getting File List</b><br>
</a>
</h3>
        <div style="margin-left:80px;"><pre><font size=3>
</font></pre></div>

<!-- sce_hd4 -->
<a name="Heading4_9_9">
<h3>
<a href="#Heading3_9"> 9. </a>9 
<!-- hp1 --><b>Save Data Saving Decision</b><br>
</a>
</h3>
<div style="margin-left:50px;">The above four types can also be used for unprotected data files in the same way as for protected data files.<br></div>

<!-- sce_hd3 -->
<a name="Heading3_10">
<h2>
 10 <!-- hp --><b>Miscellaneous Issues</b>
<hr noshade>
</h2>


<!-- sce_hd4 -->
<a name="Heading4_10_1">
<h3>
<a href="#Heading3_10"> 10. </a>1 
<!-- hp1 --><b>Overwriting</b><br>
</a>
</h3>
<div style="margin-left:50px;">Types that overwrite save data only update the files that are changed at that time. For example, only PARAM.SFO, content information files for which overwriting was specified, and data files having the specified file names are overwritten. Files that are not overwritten are not deleted.<br>However, care is required when the save data creation type supporting multiple calls creates new save data because when the same save data already exists, the new data is created after deleting the existing save data. To update files by using a type supporting multiple calls, you should use the data file writing type. This type can also be used to simultaneously update the PARAM.SFO contents and overwrite a content information file.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_10_2">
<h3>
<a href="#Heading3_10"> 10. </a>2 
<!-- hp1 --><b>Loading</b><br>
</a>
</h3>
<div style="margin-left:50px;">All types that perform loading, including the single call loading type, support reading from save data having multiple data files.<br>Save data having multiple data files can be created by a type supporting multiple calls and that save data can be read by a loading type with screen displays.<br>However, only one file can be read by one call.<br></div>

<!-- sce_hd3 -->
<a name="Heading3_11">
<h2>
 11 <!-- hp --><b>Error Dialogs</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">The Message Dialog Utility can be used to display error dialogs on the screen for errors that are returned by auto types (loading, saving, and deletion) with no accompanying screen displays and all types supporting multiple calls.<br>By just passing an error value to the Message Dialog Utility, the screen text is automatically output. The text can also be declared separately. (For information about Message Dialog Utility options and error dialog screen operations, refer to the "Utility Services Overview document.")<br><br>Although all errors of the types described above are basically supported, there is one exception. If a status error of a type supporting multiple calls (SCE_UTILITY_SAVEDATA_ERROR_MC_STATUS_ERROR) is specified in the Message Dialog Utility, it is unsupported and an error occurs. Since this error should only occur during game program development, if status management is performed properly, in will not occur or it can be dealt with easily. Therefore, it is not supported.<br><br>For a type having accompanying screen displays, the support mentioned above is unnecessary since the error dialog is output automatically.<br><br></div>

<!-- sce_hd3 -->
<a name="Heading3_12">
<h2>
 12 <!-- hp --><b>Using Types Supporting Multiple Calls</b>
<hr noshade>
</h2>


<!-- sce_hd4 -->
<a name="Heading4_12_1">
<h3>
<a href="#Heading3_12"> 12. </a>1 
<!-- hp1 --><b>Multiple Utility Calls</b><br>
</a>
</h3>
<div style="margin-left:50px;">The operations that the utility can perform in one call are limited.<br>In particular, only one data file can be accessed in one call. To update save data having multiple data files, the utility must be called multiple times.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_12_2">
<h3>
<a href="#Heading3_12"> 12. </a>2 
<!-- hp1 --><b>Problems Associated With Multiple Calls</b><br>
</a>
</h3>
<div style="margin-left:50px;">Let us consider multiple calls of the utility.<br>There will be no problem as long as the Memory Stick&trade; is not removed or the utility is not suspended during the utility call.<br></div>

<div style="margin-left:67px;">
<p>
<img src="gif/Utility_Savedata-Overview-English004.gif">
</div>
<div style="margin-left:50px;"><br>Since the utility returns an error if the Memory Stick&trade; is removed or the utility is suspended while the utility is executing, the game program can receive it and perform error handling.<br></div>

<div style="margin-left:67px;">
<p>
<img src="gif/Utility_Savedata-Overview-English005.gif">
</div>
<div style="margin-left:50px;"><br><br>However, if this does not occur while the utility is being executed, the error may not be able to be detected.<br><br></div>

<div style="margin-left:67px;">
<p>
<img src="gif/Utility_Savedata-Overview-English006.gif">
</div>
<div style="margin-left:50px;"><br>This problem can be resolved for a type supporting multiple calls by specifying the "status" when the utility is called.<br></div>

<div style="margin-left:67px;">
<p>
<img src="gif/Utility_Savedata-Overview-English007.gif">
</div>
<div style="margin-left:50px;"><br></div>

<!-- sce_hd4 -->
<a name="Heading4_12_3">
<h3>
<a href="#Heading3_12"> 12. </a>3 
<!-- hp1 --><b>About the Status</b><br>
</a>
</h3>
<div style="margin-left:50px;">When the utility is a type supporting multiple calls, a status should always be set when the utility is called.<br>The status is one of the following four values.<br></div>
<div style="margin-left:70px;"><ul>
<li> <b>start</b>
<li> <b>relay</b>
<li> <b>end</b>
<li> <b>single</b>
</ul></div>

<!-- sce_hd4 -->
<a name="Heading4_12_4">
<h3>
<a href="#Heading3_12"> 12. </a>4 
<!-- hp1 --><b>Errors That Can Be Detected During Status Operation</b><br>
</a>
</h3>
<div style="margin-left:50px;">The detectable behaviors are:<br></div>
<div style="margin-left:70px;"><ul>
<li> Removing the Memory Stick&trade;
<li> Suspending or resuming the utility
</ul></div>
<div style="margin-left:50px;">These errors, which are assigned separately, are supported by the Message Dialog Utility.<br>In addition, the invalid status usage method error or status error is also returned. This error is not supported by the Message Dialog Utility. (See the section entitled "Error Dialog Screen Displays.")<br>The above three errors are collectively referred to as behavior detection errors.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_12_5">
<h3>
<a href="#Heading3_12"> 12. </a>5 
<!-- hp1 --><b>start Status</b><br>
</a>
</h3>
<div style="margin-left:50px;">This status is set for the first utility when multiple calls are made.<br>No behavior detection error is returned.<br>Although no status error occurs even if the utility is called with this status during multiple calls (when the previous utility was called with <b>start</b> or <b>relay</b>), multiple calling is aborted.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_12_6">
<h3>
<a href="#Heading3_12"> 12. </a>6 
<!-- hp1 --><b>relay Status</b><br>
</a>
</h3>
<div style="margin-left:50px;">This status is set for a utility between the first and last of the multiple calls.<br>A behavior detection error is returned.<br>A status error occurs if the previous utility was not called with <b>start</b> or <b>relay</b>).<br></div>

<!-- sce_hd4 -->
<a name="Heading4_12_7">
<h3>
<a href="#Heading3_12"> 12. </a>7 
<!-- hp1 --><b>end Status</b><br>
</a>
</h3>
<div style="margin-left:50px;">This status is set for the last utility of the multiple calls.<br>A behavior detection error is returned.<br>A status error occurs if the previous utility was not called with <b>start</b> or <b>relay</b>).<br></div>

<!-- sce_hd4 -->
<a name="Heading4_12_8">
<h3>
<a href="#Heading3_12"> 12. </a>8 
<!-- hp1 --><b>single Status</b><br>
</a>
</h3>
<div style="margin-left:50px;">This status is set for a utility that is not a multiple call utility.<br>This is a situation when the operation on the save data is completed with one call.<br>No behavior detection error is returned.<br>Although no status error occurs even if the utility is called with this status during multiple calls (when the previous utility was called with <b>start</b> or <b>relay</b>), multiple calling is aborted.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_12_9">
<h3>
<a href="#Heading3_12"> 12. </a>9 
<!-- hp1 --><b>Handling of Single Call Types</b><br>
</a>
</h3>
<div style="margin-left:50px;">All single call types are handled with <b>single</b> status.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_12_10">
<h3>
<a href="#Heading3_12"> 12. </a>10 
<!-- hp1 --><b>Saving the Status</b><br>
</a>
</h3>
<div style="margin-left:50px;">The status is saved even when a utility service other than the save data utility is started up.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_12_11">
<h3>
<a href="#Heading3_12"> 12. </a>11 
<!-- hp1 --><b>Example of Status Use</b><br>
</a>
</h3>
<div style="margin-left:50px;">The status is set and used as follows.<br></div>

<div style="margin-left:67px;">
<p>
<img src="gif/Utility_Savedata-Overview-English008.gif">
</div>
<div style="margin-left:50px;"><br>Other Examples (entries enclosed in [[ ]] indicate processing by the game program)<br><br></div>

<!-- sce_title -->
<a Name ="HeadingT_12_11_16">
<div style="margin-left:40px;"><h4><b>Example 1</b><br><br></h4></div></a>

</ol>
<div style="margin-left:55px;"><ol>
<li VALUE=1> <b>start:</b> Getting save data user ID list</li>
<li VALUE=2> [[Display list selection screen]]</li>
<li VALUE=3> <b>relay:</b> Save data saving decision</li>
<li VALUE=4> [[If there is insufficient free space, go to error handling]]</li>
<li VALUE=5> [[Create data file 1 image]]</li>
<li VALUE=6> <b>relay:</b> Save data creation</li>
<li VALUE=7> [[Create data file 2 image]]</li>
<li VALUE=8> <b>end:</b> Save data addition</li>
</ol></div>
<div style="margin-left:50px;"><br></div>

<!-- sce_title -->
<a Name ="HeadingT_12_11_17">
<div style="margin-left:40px;"><h4><b>Example 2</b><br><br></h4></div></a>

<div style="margin-left:55px;"><ol>
<li VALUE=1> <b>single:</b> Data file deletion</li>
</ol></div>

<!-- sce_hd4 -->
<a name="Heading4_12_12">
<h3>
<a href="#Heading3_12"> 12. </a>12 
<!-- hp1 --><b>Example of Invalid Status Use</b><br>
</a>
</h3>

<!-- sce_title -->
<a Name ="HeadingT_12_12_18">
<div style="margin-left:40px;"><h4><b>Example of Invalid Use</b><br><br></h4></div></a>

<div style="margin-left:55px;"><ol>
<li VALUE=1> <b>start:</b> Getting save data user ID list</li>
<li VALUE=2> [[Use the above to create save data list]]</li>
<li VALUE=3> Single call type: List-selection loading <b>... Illegal</b></li>
</ol></div>
<div style="margin-left:67px;">A single call type cannot perform status management. If the Memory Stick&trade; is changed immediately after the list was obtained, a subsequent list-selection loading will not return an error, and an unintended result will probably occur.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_12_13">
<h3>
<a href="#Heading3_12"> 12. </a>13 
<!-- hp1 --><b>Precautions Concerning a Corrupted Data Decision</b><br>
</a>
</h3>
<div style="margin-left:50px;">If the user removes the Memory Stick&trade; during save data creation according to multiple calls, a utility error or behavior detection error occurs.<br>At this time, some of the save data that was being created remains on the Memory Stick&trade;.<br>Normally, the utility considers this to be corrupted data, and this data cannot be seen from a game program. (It appears as if the save data did not exist.)<br>However, depending on when the Memory Stick&trade; was removed, the utility may not be able to consider the save data to be corrupted.<br>For example, if the Memory Stick&trade; is removed during the following:<br></div>
<div style="margin-left:55px;"><ol>
<li VALUE=1> [[Create data file 1 image]]</li>
<li VALUE=2> <b>start: </b>Save data creation (creation of data file 1)</li>
<li VALUE=3> [[Create data file 2 image]]</li>
<li VALUE=4> <b>relay: </b>Data file addition (creation of data file 2)</li>
<li VALUE=5> [[Create data file 3 image]]</li>
<li VALUE=6> <b>end: </b>Data file addition (creation of data file 3)</li>
</ol></div>
<div style="margin-left:50px;">the save data will usually be considered to be corrupted data and will be non-existent. However, depending on the timing, although some data files are lost, correct save data in terms of format may be saved. As a result, data files 1 and 2 may be able to be loaded, but the file may not be able to be found for data file 3 and an error may occur.<br>Since the utility cannot determine whether or not the file configuration is correct, the game program must do this.<br>An adjustment is made so that the times when this kind of situation may occur is made as short as possible.<br>A game program can take the following measures to shorten the time that the utility is operating during a multiple calling period as much as possible. For the example described above, if the calls are made as follows:<br></div>
<div style="margin-left:55px;"><ol>
<li VALUE=1> Preprocessing <br>[[Create data file 1 image]]<br>[[Create data file 2 image]]<br>[[Create data file 3 image]]</li>
<li VALUE=2> <b>start: </b>Save data creation (creation of data file 1)</li>
<li VALUE=3> <b>relay:</b> Data file addition (creation of data file 2)</li>
<li VALUE=4> <b>end: </b>Data file addition (creation of data file 3)</li>
</ol></div>
<div style="margin-left:50px;">a fault will occur very rarely.<br>Of course, this kind of problem will not occur with the getting a file list type or data file reading type, which do not involve the writing of save data.<br></div>

<!-- sce_hd3 -->
<a name="Heading3_13">
<h2>
 13 <!-- hp --><b>Examples of the Use of Types Supporting Multiple Calls</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">The following examples are provided to help you better understand types supporting multiple calls.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_13_1">
<h3>
<a href="#Heading3_13"> 13. </a>1 
<!-- hp1 --><b>Create Specific Save Data</b><br>
</a>
</h3>

<!-- sce_title -->
<a Name ="HeadingT_13_1_19">
<div style="margin-left:40px;"><h4><b>Specifications:</b><br><br></h4></div></a>

<div style="margin-left:50px;">There is only one save data.<br>When creating new data, create two data files. Create new content information.<br>When overwriting data, update by overwriting only data file 1. Update content information.<br></div>
<br>

<div style="margin-left:67px;">
<p>
<img src="gif/Utility_Savedata-Overview-English009.gif">
</div>
<br>

<!-- sce_title -->
<a Name ="HeadingT_13_1_20">
<div style="margin-left:40px;"><h4><b>POINT:</b><br><br></h4></div></a>

<div style="margin-left:67px;">Examines existing save data with the get file list type. (Also checks whether a <br>Memory Stick&trade; is inserted.) In addition, for overwritten files, also checks the file structure. <br>For the save data saving decision type, returns separate decision results for overwriting and for newly created.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_13_2">
<h3>
<a href="#Heading3_13"> 13. </a>2 
<!-- hp1 --><b>Selectively Create Multiple Save Data</b><br>
</a>
</h3>

<!-- sce_title -->
<a Name ="HeadingT_13_2_21">
<div style="margin-left:40px;"><h4><b>Specifications:</b><br><br></h4></div></a>

<div style="margin-left:50px;">There are multiple save data.<br>Display a list of save data.<br>When creating new data, create two data files. Create new content information.<br>When overwriting data, update by overwriting only data file 1. Update content information.<br>Note: The utilities to be called are the same as in the section "Create Specific Save Data."<br><br></div>


<div style="margin-left:67px;">
<p>
<img src="gif/Utility_Savedata-Overview-English010.gif">
</div>
<br>

<!-- sce_title -->
<a Name ="HeadingT_13_2_22">
<div style="margin-left:40px;"><h4><b>POINT:</b><br><br></h4></div></a>

<div style="margin-left:67px;">The getting save data user ID list type retrieves existing save data. (Also checks whether a Memory Stick&trade; is inserted.) <br>In the case of overwriting existing save data, checks whether or not the file structure is correct using the get file list type. <br>For the save data saving decision type, returns separate decision results for overwriting and for newly created.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_13_3">
<h3>
<a href="#Heading3_13"> 13. </a>3 
<!-- hp1 --><b>Selectively Updating Files Within Specific Save Data</b><br>
</a>
</h3>

<!-- sce_title -->
<a Name ="HeadingT_13_3_23">
<div style="margin-left:40px;"><h4><b>Specifications:</b><br><br></h4></div></a>

<div style="margin-left:67px;">Although there is only one save data, it contains multiple data files, which are each separate user data.<br>The data file configuration consists of one system data file and multiple user data files.<br>When creating new save data, create two data files for the system and users. Create new content information.<br>When creating new user data, create one data file. Update content information.<br>When overwriting user data, update one data file by overwriting. Update content information.<br></div>


<div style="margin-left:67px;">
<p>
<img src="gif/Utility_Savedata-Overview-English011.gif">
</div>
<br><br>

<!-- sce_title -->
<a Name ="HeadingT_13_3_24">
<div style="margin-left:40px;"><h4><b>POINT:</b><br><br></h4></div></a>

<div style="margin-left:67px;">For the get file list type, examines existing save data. (Also checks whether a <br>Memory Stick&trade; is inserted.) Also checks the file structure. <br>For the save data saving decision type, returns separate decision results for overwriting and for newly created. Uses the overwriting decision result for creation and overwriting of user data,. Uses the newly created decision result only for creation of save data itself,. In addition, note that for each of these cases, the file list that is provided to the save data saving decision type will be different.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_13_4">
<h3>
<a href="#Heading3_13"> 13. </a>4 
<!-- hp1 --><b>Using Reading and Writing Continuously</b><br>
</a>
</h3>

<!-- sce_title -->
<a Name ="HeadingT_13_4_25">
<div style="margin-left:40px;"><h4><b>Specifications:</b><br><br></h4></div></a>

<div style="margin-left:67px;">Read a data file for game options and write a data file for user data.<br><br></div>


<div style="margin-left:67px;">
<p>
<img src="gif/Utility_Savedata-Overview-English012.gif">
</div>
<br>

<!-- sce_title -->
<a Name ="HeadingT_13_4_26">
<div style="margin-left:40px;"><h4><b>POINT:</b><br><br></h4></div></a>

<div style="margin-left:67px;">When writing is required after reading to update a data file, the saving decision is always made before the writing type is called. (Although the saving decision may also be made before reading, the writing contents probably will vary depending on the data that was read.)<br></div>

<!-- sce_hd3 -->
<a name="Heading3_14">
<h2>
 14 <!-- hp --><b>Related Files</b>
<hr noshade>
</h2>

<div style="margin-left:80px;">The following files are required to use the Save Data utility.<br><br></div>
<div style="margin-left:90px;">
<table border=1>
<tr>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>Category</b>&nbsp;&nbsp;</td>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>File Name</b>&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;Header file&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;utility_savedata.h&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;Stub library file&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;utility_stub.a&nbsp;&nbsp;</td>
</tr>
</table>
</div>
<br>

<!-- sce_hd3 -->
<a name="Heading3_15">
<h2>
 15 <!-- hp --><b>Appendix: Save Data Size Declarations</b>
<hr noshade>
</h2>


<!-- sce_hd4 -->
<a name="Heading4_15_1">
<h3>
<a href="#Heading3_15"> 15. </a>1 
<!-- hp1 --><b>Size Displayed Within a Game (When Required)</b><br>
</a>
</h3>
<div style="margin-left:50px;">Basically, the size may be displayed in terms of a 32K cluster size.<br>When a Memory Stick&trade; is inserted, the recommended display is the size that is accurately calculated according to the cluster size of that Memory Stick&trade;, and when no Memory Stick&trade; is inserted, the recommended display is the size in terms of a 32K cluster size.<br>These sizes can be obtained by using the getting the Memory Stick&trade; free space and save data size type and save data saving decision type. (The save data saving decision type calculates the size in terms of 32K clusters if no Memory Stick&trade; is inserted.)<br></div>

<!-- sce_hd4 -->
<a name="Heading4_15_2">
<h3>
<a href="#Heading3_15"> 15. </a>2 
<!-- hp1 --><b>Size Mentioned on the Product Package</b><br>
</a>
</h3>
<div style="margin-left:50px;">Obtain the save data size by assuming a cluster size of 32K and use that size on the package. A larger size may also be used to use a round number.<br>Example: 544 kilobytes &rarr; 550 kilobytes<br>A simple method of obtaining this size if the Save Data utility is used according to the getting the Memory Stick&trade; free space and save data size type is to obtain the save data size by assuming the cluster size is 32K.<br>It can also be obtained by actually saving the save data on a 32K Memory Stick&trade; (a <br>Memory Stick&trade; of 256M or more can be created if it is formatted by PSP&trade; system software) and referencing the save data size that is displayed by Save Data Management of the PSP&trade; system software.<br></div>

<!-- sce_hd3 -->
<a name="Heading3_16">
<h2>
 16 <!-- hp --><b>Appendix: Memory Stick&trade; Free Space Display</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">PSP&trade; system software calculates and displays the amount of free space by using the value that was obtained by subtracting two clusters from the actual number of unused clusters on the Memory Stick&trade;.<br>These two clusters are used as a margin in preparation for saving save data correctly even when it is assumed that directories required by the system will be created and the parent directory will become larger due to the creation of save data.<br>Note that this differs from when the amount of free space is obtained on different systems.<br><br></div>
<p><p><hr>
<div ALIGN="right">
    &copy;2010 Sony Computer Entertainment Inc.  All Rights Reserved.<br>
    SCE CONFIDENTIAL
</div>
</body>
</html>
