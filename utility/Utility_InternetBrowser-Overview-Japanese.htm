<html lang="jp">
<head>
<title>Utility_InternetBrowser-Overview</title>
<meta http-equiv="Content-Type" content= text/html; charset=Shift_JIS>
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta http-equiv="Content-Style-Type" content="Text/css>
<meta name="Author"Content=" Sony Computer Entertainment Inc.">
</head>
<body bgcolor="#ffffff" text="#000000" >
<a name=TOP></a>
<table WIDTH="100%">
<tr><td>
<h3>PSP&reg; Programmer Tool Runtime Library Release 6.6.0</h3>
</td>
</tr>
</table>
<hr noshade size=6>
<center><h1>
インターネットブラウザユーティリティ
</h1></center>
</a>
<!-- sce_hd1 -->

<!-- sce_hd3 -->
<a name="Heading3_1">
<h2>
 1 <!-- hp --><b>ユーティリティについて</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">ユーティリティの概要などについては、「ユーティリティサービス」概要ドキュメントを参照してください。<br><br></div>

<!-- sce_hd3 -->
<a name="Heading3_2">
<h2>
 2 <!-- hp --><b>インターネットブラウザユーティリティ概要</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">インターネットブラウザユーティリティはゲームプログラムからインターネットブラウザを呼び出すための手段を提供します。<br>ゲームプログラムから呼び出されたインターネットブラウザは、一部を除きホームメニューから呼び出された場合と同等の機能を持ち、ゲームの関連サイトのブラウジングや各種データのダウンロードに利用することができます。ゲームプログラムから呼び出されたインターネットブラウザにおける制限については「インターネットブラウザユーティリティの制限」の章を参照してください。<br>また、インターネットブラウザユーティリティは、ユーザインタフェースの制限指定やコンテンツからの戻り値受け取り等、ゲームプログラムからの利用を補助するための機能を提供します。詳細については本ドキュメント内の各項目およびUtility_InternetBrowser-Referenceを参照してください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_2_1">
<h3>
<a href="#Heading3_2"> 2. </a>1 
<!-- hp1 --><b>ユーザインタフェース</b><br>
</a>
</h3>
<div style="margin-left:50px;">インターネットブラウザユーティリティを起動すると、ユーザインタフェースは全画面に渡って上書きされゲームプログラムによる表示が見えることはありません。<br>インターネットブラウザユーティリティからさらに必要に応じてネットワーク設定ユーティリティ、オンスクリーンキーボードユーティリティ等が呼び出されます。<br><br>下の絵はコンテンツを表示した状態の例です。<br></div>

<div style="margin-left:67px;">
<p>
<img src="gif/Utility_InternetBrowser-Overview-Japanese001.gif">
</div>
<div style="margin-left:50px;"><br></div>

<!-- sce_hd5 -->
<div style="margin-left:40px;"><a name="Heading5_2_1_1"><h4>
(1)&nbsp;<b>コンテンツ表示</b><br></h4>
</a></div>
<div style="margin-left:67px;">コンテンツはPSP&reg;の全画面(480x272)を用いて表示されます。<br></div>

<!-- sce_hd5 -->
<div style="margin-left:40px;"><a name="Heading5_2_1_2"><h4>
(2)&nbsp;<b>カーソル</b><br></h4>
</a></div>
<div style="margin-left:67px;">カーソルは指定により非表示にすることもできます。<br></div>
<br>
<div style="margin-left:50px;">下の絵はタブインジケータを表示した状態の例です。<br></div>

<div style="margin-left:67px;">
<p>
<img src="gif/Utility_InternetBrowser-Overview-Japanese002.gif">
</div>
<div style="margin-left:50px;"><br></div>

<!-- sce_hd5 -->
<div style="margin-left:40px;"><a name="Heading5_2_1_3"><h4>
(3)&nbsp;<b>タブインジケータ</b><br></h4>
</a></div>
<div style="margin-left:67px;">有効なタブの個数と現在前面に表示されているタブを表しています。また、ページの読み込み中はその進捗を各タブ毎に表示します。<br>タブインジケータは指定により非表示にすることもできます。<br></div>
<br>
<div style="margin-left:50px;">下の絵はインターネットブラウザのメニューを表示した状態の例です。<br>メニューはユーザ操作により表示/非表示が行われます。<br></div>

<div style="margin-left:67px;">
<p>
<img src="gif/Utility_InternetBrowser-Overview-Japanese003.gif">
</div>
<div style="margin-left:50px;"><br></div>

<!-- sce_hd5 -->
<div style="margin-left:40px;"><a name="Heading5_2_1_4"><h4>
(4)&nbsp;<b>タイトルバー</b><br></h4>
</a></div>
<div style="margin-left:67px;">表示しているページのタイトルが表示されます。画面の横幅に入りきらない場合はスクロール表示を行います。<br>ユーザインタフェース無しモードを指定するとタイトルバーは表示されません。<br></div>

<!-- sce_hd5 -->
<div style="margin-left:40px;"><a name="Heading5_2_1_5"><h4>
(5)&nbsp;<b>アドレスバー</b><br></h4>
</a></div>
<div style="margin-left:67px;">表示しているページのアドレス(URL)が表示されます。<br>ユーザインタフェース無しモードを指定するとアドレスバーは表示されません。<br>ユーザインタフェース制限無しモードを指定した場合のみ、ユーザによるアドレス編集が可能となります。<br></div>

<!-- sce_hd5 -->
<div style="margin-left:40px;"><a name="Heading5_2_1_6"><h4>
(6)&nbsp;<b>メニューバー</b><br></h4>
</a></div>
<div style="margin-left:67px;">メニュー項目が並んでいます。アイコンを選択することでそれぞれの機能が呼び出されます。<br>ユーザインタフェース無しモードを指定するとメニューバーは表示されません。<br>ユーザインタフェース制限モードを指定すると一部のアイコンは選択不可となります。<br></div>
<div style="margin-left:50px;"><br>下の絵はメニュー項目を選択し、サブメニューを表示した状態の例です。<br>メニュー項目によってはこのようにサブメニューが表示されるものがあります。<br></div>

<div style="margin-left:67px;">
<p>
<img src="gif/Utility_InternetBrowser-Overview-Japanese004.gif">
</div>
<div style="margin-left:50px;"><br></div>

<!-- sce_hd5 -->
<div style="margin-left:40px;"><a name="Heading5_2_1_7"><h4>
(7)&nbsp;<b>サブメニュー</b><br></h4>
</a></div>
<div style="margin-left:67px;">サブメニュー項目が並んでいます。項目を選択することでそれぞれの機能が呼び出されます。<br>ユーザインタフェース制限モードを指定すると一部のサブメニュー項目は選択不可となります。<br></div>
<div style="margin-left:50px;"><br>下の絵はサブメニュー項目を選択し、設定ダイアログを表示した状態の例です。<br></div>

<div style="margin-left:67px;">
<p>
<img src="gif/Utility_InternetBrowser-Overview-Japanese005.gif">
</div>
<div style="margin-left:50px;"><br></div>

<!-- sce_hd5 -->
<div style="margin-left:40px;"><a name="Heading5_2_1_8"><h4>
(8)&nbsp;<b>ダイアログ</b><br></h4>
</a></div>
<div style="margin-left:67px;">メニュー項目やサブメニュー項目を選択すると、目的に応じた様々なタイプのダイアログが表示されます。ダイアログは全て全画面で表示されます。<br>ユーザインタフェース制限モードを指定した場合は、メニュー項目やサブメニュー項目が選択不可となるため、基本的にダイアログまで進むことはありません。<br></div>
<div style="margin-left:50px;"><br>下の絵はダウンロードの保存先確認画面を表示した状態の例です。<br></div>

<div style="margin-left:67px;">
<p>
<img src="gif/Utility_InternetBrowser-Overview-Japanese006.gif">
</div>
<div style="margin-left:50px;"><br></div>

<!-- sce_hd5 -->
<div style="margin-left:40px;"><a name="Heading5_2_1_9"><h4>
(9)&nbsp;<b>ダウンロード</b><br></h4>
</a></div>
<div style="margin-left:67px;">ダウンロード対象のコンテンツを選択するとインターネットブラウザに内蔵されたダウンロード機能が呼び出され、ダウンロード確認、保存先確認、進捗表示の順にダイアログが表示されます。<br>進捗表示以外のダイアログは指定によりスキップさせることもできます。<br>保存先はユーザによる編集が可能ですが、指定により編集不可にすることもできます。<br></div>
<div style="margin-left:50px;"><br>下の絵はインターネットブラウザからネットワーク設定ユーティリティを呼び出した状態の例です。<br></div>

<div style="margin-left:67px;">
<p>
<img src="gif/Utility_InternetBrowser-Overview-Japanese007.gif">
</div>
<div style="margin-left:50px;"><br></div>

<!-- sce_hd5 -->
<div style="margin-left:40px;"><a name="Heading5_2_1_10"><h4>
(10)&nbsp;<b>ネットワーク設定ユーティリティ</b><br></h4>
</a></div>
<div style="margin-left:67px;">ネットワーク設定ユーティリティはゲームプログラムから呼び出した場合同様、全画面で表示されます。<br>接続の選択方法は指定により変更ができます。<br></div>
<div style="margin-left:50px;"><br>下の絵はインターネットブラウザからオンスクリーンキーボードユーティリティを呼び出した状態の例です。<br></div>

<div style="margin-left:67px;">
<p>
<img src="gif/Utility_InternetBrowser-Overview-Japanese008.gif">
</div>
<div style="margin-left:50px;"><br></div>

<!-- sce_hd5 -->
<div style="margin-left:40px;"><a name="Heading5_2_1_11"><h4>
(11)&nbsp;<b>オンスクリーンキーボードユーティリティ</b><br></h4>
</a></div>
<div style="margin-left:67px;">オンスクリーンキーボードユーティリティはゲームプログラムから呼び出した場合同様、全画面で表示されます。<br>インターネットブラウザから呼び出されたオンスクリーンキーボードでは、URL入力モードにおいて入力履歴機能が使用可能となります。<br>入力モードの選択は状況に応じてインターネットブラウザによって自動的に行われます。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_2_2">
<h3>
<a href="#Heading3_2"> 2. </a>2 
<!-- hp1 --><b>サスペンド時の動作</b><br>
</a>
</h3>
<div style="margin-left:50px;">インターネットブラウザユーティリティは他のユーティリティとは異なり、サスペンド時に終了することはありません。レジューム時にはサスペンドした時に表示していたページがそのまま表示されます。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_2_3">
<h3>
<a href="#Heading3_2"> 2. </a>3 
<!-- hp1 --><b>必要メモリ</b><br>
</a>
</h3>
<div style="margin-left:50px;">インターネットブラウザユーティリティを動作させるためには、モジュールのロードに必要なメモリ及びスタック領域としてユーザメモリ空間に5MB以上(Macromedia<sup>&reg;</sup> Flash<sup>&reg;</sup> Player機能を有効にした場合は6MB以上)の空きがあること、かつそのうち3.5MB(Flash<sup>&reg;</sup> Player機能を有効にした場合は4.5MB)は連続領域であることが必要です。<br>また、これ以外に推奨8MB以上(最低4MB)のメモリ領域をインターネットブラウザ専用ヒープとして与える必要があります。キャッシュ用のメモリもインターネットブラウザ専用ヒープから確保されますので、それも考慮して指定してください。<br><br><a href="../network/PSPNET_Apctl-Reference-Japanese.htm#sceNetApctlInit">sceNetApctlInit</a>()にて指定するシステム内部スレッドのスタックサイズは、SCE_NET_APCTL_LEAST_STACK_SIZEで示される最低スタックサイズに16KB以上を加えたサイズを指定してください。<br></div>

<!-- sce_title -->
<a Name ="HeadingT_2_3_1">
<div style="margin-left:40px;"><h4><b>例</b><br><br></h4></div></a>

        <div style="margin-left:80px;"><pre><font size=3>#define APCTL_PRIO			48
#define APCTL_HANDLER_STACKSIZE 	(1024 * 16)
#define APCTL_STACKSIZE		(SCE_NET_APCTL_LEAST_STACK_SIZE + \
        				 APCTL_HANDLER_STACKSIZE)

int ret = <a href="../network/PSPNET_Apctl-Reference-Japanese.htm#sceNetApctlInit">sceNetApctlInit</a>(APCTL_STACKSIZE, APCTL_PRIO);
</font></pre></div>

<!-- sce_hd4 -->
<a name="Heading4_2_4">
<h3>
<a href="#Heading3_2"> 2. </a>4 
<!-- hp1 --><b>コンテンツ</b><br>
</a>
</h3>
<div style="margin-left:50px;">インターネットブラウザユーティリティの初期化パラメータの一部はコンテンツの作成と合わせて値を決定する必要があります。<br>インターネットブラウザが持つ独自の機能や制限についてはPSP&reg; Developer Networkウェブサイト上で公開されている「PSP&trade; (PlayStation&reg; Portable)インターネットブラウザ向けコンテンツ作成ガイドライン(開発者向け)」も併せて参照してください。<br><br></div>

<!-- sce_hd3 -->
<a name="Heading3_3">
<h2>
 3 <!-- hp --><b>インターネットブラウザユーティリティの補助機能</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">インターネットブラウザユーティリティはホームメニューからインターネットブラウザを呼び出した場合の機能に加えて、ゲームプログラムからの利用を補助するための機能を持っています。<br>本章ではそれらの補助機能について説明します。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_1">
<h3>
<a href="#Heading3_3"> 3. </a>1 
<!-- hp1 --><b>ユーザインタフェースのレベル指定</b><br>
</a>
</h3>
<div style="margin-left:50px;">インターネットブラウザユーティリティではユーザインタフェースの全機能を利用可能とするモードのほかに、一部の機能を制限したりユーザインタフェースを一切出さないモードを有しています。これらのモードを利用することで、初期化パラメータで指定したページ以外のブラウジングを制限したりゲームプログラムとブラウジングとをより自然に接続することが可能となっています。<br><br>ユーザインタフェース制限モードでは制限される機能のアイコンやメニュー項目はグレーアウトされ、選択することができなくなります。<br>制限されるユーザインタフェース機能は以下の通りです。<br></div>
</ol>
<div style="margin-left:40px;"><ul>
<li> URLを入力して開く
<li> ブックマーク機能
<li> 訪問履歴機能
<li> ホームページ設定
<li> 画像表示ON/OFF<br>設定に関わらずONで動作します。
<li> アニメーションON/OFF<br>設定に関わらずONで動作します。
<li> JavaScript ON/OFF<br>設定に関わらずONで動作します。
<li> Flash ON/OFF<br>設定に関わらずONで動作します。ただし、ユーザが本体設定の「Flash<sup>&reg;</sup> Playerを有効にする」を既に実行していることと、ユーティリティ起動時に初期化パラメータに<br>"Flash<sup>&reg;</sup> Player機能を有効にする"指定をすることが条件となります。
<li> 省メモリON/OFF<br>設定に関わらずOFFで動作します。
<li> 接続設定<br>初期化パラメータで渡される一時的設定に従います。
<li> プロキシサーバー設定
<li> 認証情報削除
<li> Cookie受信設定<br>初期化パラメータで渡される一時的設定に従います。
<li> Cookie削除
<li> 入力履歴削除
<li> キャッシュサイズ設定<br>初期化パラメータで渡される一時的設定に従います。
<li> キャッシュ削除
</ul></div>
<div style="margin-left:50px;"><br>ユーザインタフェース無しモードではユーザインタフェース制限モードにおける機能制限に加えてメニューの表示自体が無効となります。<br>ただしカーソルやタブインジケータの表示が自動的に無効になることはありません。無効にしたい場合は別途初期化パラメータに指定することが必要となります。<br><br>設定方法の詳細についてはUtility_InternetBrowser-Referenceの<a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerParam">SceUtilityHtmlViewerParam</a>を参照してください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_2">
<h3>
<a href="#Heading3_3"> 3. </a>2 
<!-- hp1 --><b>一時的な設定の変更</b><br>
</a>
</h3>
<div style="margin-left:50px;">インターネットブラウザユーティリティをユーザインタフェース制限付き、またはユーザインタフェース無しで呼び出す際、Cookieの受信設定など一部のブラウザ設定を一時的に変更することができます。ユーザインタフェース制限無しでユーティリティを呼び出す場合、一時的な設定変更を行うことはできません。<br><br>一時的に変更可能な設定項目は以下の通りです。<br></div>
<div style="margin-left:40px;"><ul>
<li> Cookieの受信設定<br>Cookieの受信設定を変更することで、Cookie受信時の振る舞いをゲームプログラムに関連したサイトの挙動に合わせることができるようになります。<br>ただし設定が一時的といえども、受信したCookieがユーティリティ終了時に無条件に削除されることはありません。
<li> キャッシュサイズ<br>キャッシュサイズはlibhttpのメモリ上の簡易キャッシュ機構のサイズ指定に用いられます。キャッシュサイズを一時的に変更することで、ファイル取得効率とブラウジングに必要なメモリのバランスをゲームプログラムに関連したサイトに最適化することができます。<br>また、キャッシュ用のメモリもインターネットブラウザ専用ヒープから確保されますので、それも考慮して指定してください。
<li> ホームページ<br>ホームページを一時的に変更することで、ホームアイコンを選択することでブラウザ設定にかかわらず指定されたページに戻ることができるようになります。
<li> 文字サイズ<br>ブラウザ設定にかかわらず、表示に使用される文字サイズを小、標準、大のいずれかに指定することができます。
<li> 表示モード<br>ブラウザ設定にかかわらず、表示で用いられるレイアウト方法を標準、ジャストフィット、スマートフィットのいずれかに指定することができます。
<li> 接続モード<br>ブラウザ設定にかかわらず、ネットワーク接続時の接続設定の選択方式を自動、手動(初回接続時のみ)、手動(毎接続時)のいずれかに指定することができます。
</ul></div>
<div style="margin-left:50px;"><br>設定方法の詳細についてはUtility_InternetBrowser-Referenceの<a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerConfig">SceUtilityHtmlViewerConfig</a>を参照してください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_3">
<h3>
<a href="#Heading3_3"> 3. </a>3 
<!-- hp1 --><b>ブックマークの登録</b><br>
</a>
</h3>
<div style="margin-left:50px;">ゲームプログラムからインターネットブラウザにブックマークを登録することができます。ブックマークの登録はブックマーク情報を初期化パラメータに設定してインターネットブラウザユーティリティを呼び出すことで行われます。<br>指定したブックマークが既に登録されているかどうかを調べる機能は提供していませんので、二重登録の回避はセーブデータに登録結果を保存して次回の動作を変える等の工夫で行ってください。インターネットブラウザでも登録時にユーザ確認のダイアログ表示を行います。<br>また、ブックマークが確実に登録できる保証はありませんしユーザによる削除も可能ですので、本機能をゲーム進行に不可欠な用途に使用することは推奨できません。<br><br>ブックマークに登録可能な情報は以下の通りです。<br></div>
<div style="margin-left:40px;"><ul>
<li> URL
<li> 名称
</ul></div>
<div style="margin-left:50px;"><br>設定方法の詳細についてはUtility_InternetBrowser-Referenceの<a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerBookmark">SceUtilityHtmlViewerBookmark</a>を参照してください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_4">
<h3>
<a href="#Heading3_3"> 3. </a>4 
<!-- hp1 --><b>アップロード/ダウンロードのディレクトリ/ファイル名指定</b><br>
</a>
</h3>
<div style="margin-left:50px;">インターネットブラウザユーティリティではファイルのダウンロード/アップロードに際してディレクトリ名やファイル名を固定することでWWWサイトとのファイルのやり取りを補助するための機能を提供しています。<br>ディレクトリ名に有効な名前を指定することで、アップロード/ダウンロード時に選択可能なディレクトリをそのディレクトリに限定することができます。<br>同様に、ファイル名に有効な名前を指定することでアップロード/ダウンロード時に使用するファイル名を固定することができます。<br><br>設定方法の詳細についてはUtility_InternetBrowser-Referenceの<a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerFileParam">SceUtilityHtmlViewerFileParam</a>を参照してください。<br>ダウンロード動作について詳しくは「ファイルダウンロード機能」の章を参照してください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_5">
<h3>
<a href="#Heading3_3"> 3. </a>5 
<!-- hp1 --><b>ダウンロードのユーザインタフェース制限</b><br>
</a>
</h3>
<div style="margin-left:50px;">インターネットブラウザユーティリティによってWWWサイトからファイルをダウンロードする際のユーザインタフェースの制限を指定することができます。<br><br>指定可能な制限は以下の通りです。<br></div>
<div style="margin-left:40px;"><ul>
<li> ダウンロード開始時の確認ダイアログを表示しない
<li> ダウンロード完了時の確認ダイアログを表示しない
<li> 保存先確認ダイアログを表示しない
<li> 保存先確認ダイアログで保存先ディレクトリおよびファイル名の変更をさせない
</ul></div>
<div style="margin-left:50px;"><br>保存先確認ダイアログに関する制限を指定した場合の動作について詳しくは「ファイルダウンロード機能」の章を参照してください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_6">
<h3>
<a href="#Heading3_3"> 3. </a>6 
<!-- hp1 --><b>インターネットブラウザ起動制限の一時的な無効化</b><br>
</a>
</h3>
<div style="margin-left:50px;">本体設定でインターネットブラウザの起動制限を有効化した場合、インターネットブラウザユーティリティでも起動時とレジューム時に暗証番号入力による起動制限が行われます。<br>初期化パラメータに設定することで、この起動制限を一時的に無効化することができます。無効化はインターネットブラウザユーティリティが終了するまで継続します。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_7">
<h3>
<a href="#Heading3_3"> 3. </a>7 
<!-- hp1 --><b>起動時に開くURLの指定</b><br>
</a>
</h3>
<div style="margin-left:50px;">インターネットブラウザユーティリティ起動時に最初に開くURLを指定することができます。<br>指定方法は以下の通りで、上位ほど優先されます。<br></div>
</ul>
<div style="margin-left:55px;"><ol>
<li VALUE=1> 初期化パラメータに"ネットワーク接続確認ページのオープン"を指定<br>ネットワーク接続確認ページは無線LAN環境における認証時の接続先として設けられたものであり、各言語ごとに用意されています。単にネットワーク接続の認証のみを目的としてインターネットブラウザを起動にする際に指定します。</li>
<li VALUE=2> 初期化パラメータに初期接続URLを指定</li>
<li VALUE=3> "一時的な設定変更"でホームページURLを指定</li>
</ol></div>
<div style="margin-left:50px;">何も指定が無い場合、インターネットブラウザユーティリティはホームメニューからの起動と同様ブラウザ設定で指定されたホームページを起動時に開きます。<br><br>ユーザインタフェース無しを指定してインターネットブラウザユーティリティを起動した場合に限り、ユーザが△ボタンを押すことでネットワーク接続確認ページ、または初期接続URLで指定したページの再読み込みを行うことができます。<br>この機能は、ページの読み込みに失敗した場合、読み込み途中でネットワーク接続が切れてしまった場合、ホットスポット等で予定外のページを開いてしまった場合等に目的のページを開く手段を提供するためのものです。<br>もしユーザにこの機能を使わせたくない場合は、初期接続URLは指定せず"一時的な設定変更"でホームページURLを指定することになります。<br><br>設定方法の詳細についてはUtility_InternetBrowser-Referenceの<a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerParam">SceUtilityHtmlViewerParam</a>、<a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerConfig">SceUtilityHtmlViewerConfig</a>を参照してください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_8">
<h3>
<a href="#Heading3_3"> 3. </a>8 
<!-- hp1 --><b>タブ数の指定</b><br>
</a>
</h3>
<div style="margin-left:50px;">インターネットブラウザユーティリティは3つまでのタブブラウザとしての機能を持っています。タブの数を変更したい場合は初期化パラメータにタブの総数を指定することができます。<br>ただしタブの数を１つに指定しても、タブインジケータの表示が自動的に無効になることはありません。無効にしたい場合は別途初期化パラメータに指定することが必要となります。<br><br>設定方法の詳細についてはUtility_InternetBrowser-Referenceの<a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerParam">SceUtilityHtmlViewerParam</a>を参照してください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_9">
<h3>
<a href="#Heading3_3"> 3. </a>9 
<!-- hp1 --><b>ネットワーク接続の自動切断</b><br>
</a>
</h3>
<div style="margin-left:50px;">インターネットブラウザユーティリティを終了する際、ネットワーク接続を自動切断するかどうかを初期化パラメータに指定することができます。以下の指示が指定可能です。<br></div>
</ol>
<div style="margin-left:40px;"><ul>
<li> 自動切断する
<li> 自動切断しない
<li> 切断するかどうかダイアログを表示して確認する
</ul></div>
<div style="margin-left:50px;"><br>設定方法の詳細についてはUtility_InternetBrowser-Referenceの<a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerParam">SceUtilityHtmlViewerParam</a>を参照してください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_10">
<h3>
<a href="#Heading3_3"> 3. </a>10 
<!-- hp1 --><b>終了時確認の有無の指定</b><br>
</a>
</h3>
<div style="margin-left:50px;">インターネットブラウザユーティリティを終了する際、終了確認ダイアログを表示するか<br>表示せずに終了するかを初期化パラメータに指定することができます。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_11">
<h3>
<a href="#Heading3_3"> 3. </a>11 
<!-- hp1 --><b>カーソルの表示/非表示の指定</b><br>
</a>
</h3>
<div style="margin-left:50px;">カーソルを表示するかどうかを初期化パラメータに指定することができます。<br>ただし、非表示にした場合、ページ構成やJavaScriptやFlash<sup>&reg;</sup>にてマウス操作を必要としている場合に期待通りのブラウジングが行えない可能性がありますので注意が必要です。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_12">
<h3>
<a href="#Heading3_3"> 3. </a>12 
<!-- hp1 --><b>タブインジケータの表示/非表示の指定</b><br>
</a>
</h3>
<div style="margin-left:50px;">タブインジケータを表示するかどうかを初期化パラメータに指定することができます。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_13">
<h3>
<a href="#Heading3_3"> 3. </a>13 
<!-- hp1 --><b>アナログコントローラのHOLD / 非HOLDの指定</b><br>
</a>
</h3>
<div style="margin-left:50px;">HOLDスイッチをオンにした際にアナログコントローラをHOLDするかどうかを初期化パラメータに指定することができます。<br>アナログコントローラのHOLDはゲームプログラムに委ねられていますので、この指定により操作の一貫性を保つことができます。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_14">
<h3>
<a href="#Heading3_3"> 3. </a>14 
<!-- hp1 --><b>Flash<sup>&reg;</sup> Player機能の有効化指定</b><br>
</a>
</h3>
<div style="margin-left:50px;">Flash<sup>&reg;</sup> Player機能を有効化するかどうかを初期化パラメータに指定することができます。<br>有効化を指定した場合、モジュールのロードに必要とするメモリが1MB増加しますので注意が必要です。<br>また、実際に機能が有効になるためには、ユーザが本体設定の「Flash<sup>&reg;</sup> Playerを有効にする」を既に実行していることとブラウザ設定でFlash<sup>&reg;</sup>がONになっていることが必要です。<br>本体設定の「Flash<sup>&reg;</sup> Playerを有効にする」が実行されていない状態でFlash<sup>&reg;</sup> Player機能の有効化が指定された場合は、ユーティリティ起動時に、本体設定でFlash<sup>&reg;</sup> Playerを有効にする必要がある旨のダイアログ表示を行います。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_15">
<h3>
<a href="#Heading3_3"> 3. </a>15 
<!-- hp1 --><b>L/Rボタンによる戻る/進むの有効/無効の指定</b><br>
</a>
</h3>
<div style="margin-left:50px;">L/Rボタンによる戻る/進むの操作を有効化するかどうかを初期化パラメータに指定することができます。<br>ユーザインタフェースのレベル指定にてユーザインタフェース無しモードを選択した場合でもL/Rボタンによる戻る/進むの操作が可能ですが、この指定によりそれを無効化しコンテンツ内でのユーザの行動を制限することが可能となります。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_16">
<h3>
<a href="#Heading3_3"> 3. </a>16 
<!-- hp1 --><b>ブラウザヒープの最大使用量の取得</b><br>
</a>
</h3>
<div style="margin-left:50px;">インターネットブラウザユーティリティの起動パラメータで指定したヒープ領域のうち、使用した最大量を取得することができます。インターネットブラウザユーティリティの状態がSCE_UTILITY_COMMON_STATUS_SHUTDOWN状態に遷移した後で参照してください。<br>ここで得られる情報はインターネットブラウザに与えるヒープサイズ決定の材料にすることができますが、ブラウザヒープサイズが最大使用量に近すぎる場合、動作の著しい速度低下を招く場合があります。ブラウザヒープサイズには最大使用量の1〜3割増しの値を設定することを推奨します。<br>キャッシュ用のメモリもブラウザヒープから確保されますが、最大使用量はそれを含んだものが取得されます。<br><br>取得方法の詳細についてはUtility_InternetBrowser-Referenceの<a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerParam">SceUtilityHtmlViewerParam</a>を参照してください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_17">
<h3>
<a href="#Heading3_3"> 3. </a>17 
<!-- hp1 --><b>独自HTTPリクエストヘッダの指定</b><br>
</a>
</h3>
<div style="margin-left:50px;">ゲームプログラムが指定した内容でサーバーに独自HTTPリクエストヘッダを送信することができます。<br>これにより、特定のゲームから起動されたインターネットブラウザによる接続である事をサイト側に認識させる事が可能となります。<br><br>設定方法の詳細についてはUtility_InternetBrowser-Referenceの<a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerParam">SceUtilityHtmlViewerParam</a>を参照してください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_18">
<h3>
<a href="#Heading3_3"> 3. </a>18 
<!-- hp1 --><b>自動HTTP認証</b><br>
</a>
</h3>
<div style="margin-left:50px;">ゲームプログラムが指定した認証情報を用いて、ユーザに認証情報を入力させること無くHTTP認証を行うことができます。<br>これにより、簡易的ではありますが、ゲームプログラム以外からサイトにアクセスされることをHTTPレベルでブロックすることが可能となります。<br>また、認証情報を本体に保存させることで、ホームメニューから呼び出されたインターネットブラウザからのアクセスも許可することができます。<br><br>自動HTTP認証について詳しくは「自動HTTP認証機能」の章を参照してください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_19">
<h3>
<a href="#Heading3_3"> 3. </a>19 
<!-- hp1 --><b>最後に開いたURLの取得</b><br>
</a>
</h3>
<div style="margin-left:50px;">インターネットブラウザユーティリティ終了時に、その回の起動で最後に開いたURLを取得することができます。<br>これにより、ブラウジング結果をある程度予想することはできますが、そのURLが示す通りのページが開けているかどうかは保証できませんので、本機能をゲーム進行に不可欠な用途に使用することは推奨できません。<br><br>取得方法の詳細についてはUtility_InternetBrowser-Referenceの<a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerParam">SceUtilityHtmlViewerParam</a>、<a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerBuffer">SceUtilityHtmlViewerBuffer</a>を参照してください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_20">
<h3>
<a href="#Heading3_3"> 3. </a>20 
<!-- hp1 --><b>コンテンツからの戻り値の取得</b><br>
</a>
</h3>
<div style="margin-left:50px;">コンテンツにPSP&reg;専用のプラグインの定義およびそれを使用するJavaScriptの記述をすることで、コンテンツから任意のデータをゲームプログラムに返すことができます。<br>これにより、コンテンツとゲームプログラムの連携が可能となります。ただし、ゲームプログラムが指定したURL通りのページが開けているかどうかは保証できませんので、本機能をゲーム進行に関わる用途に使用する場合は、暗号化したデータをやり取りする等、ゲームプログラムとコンテンツにて必要十分な保護を施すことを推奨します。<br><br>コンテンツからの戻り値の取得について詳しくは「コンテンツ連携機能」の章を参照してください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_21">
<h3>
<a href="#Heading3_3"> 3. </a>21 
<!-- hp1 --><b>コンテンツからのメソッド呼び出し</b><br>
</a>
</h3>
<div style="margin-left:50px;">コンテンツにPSP&reg;専用のプラグインの定義およびそれを使用するJavaScriptの記述をすることで、ゲームプログラムが登録したメソッドをコンテンツから呼び出すことができます。<br>これにより、コンテンツとゲームプログラムにおける双方向のデータのやりとり、ゲームプログラムに用意したサービスのコンテンツからの利用等が可能となります。ただし、ゲームプログラムが指定したURL通りのページが開けているかどうかは保証できませんので、本機能をゲーム進行に関わる用途に使用する場合は、暗号化したデータをやり取りする等、ゲームプログラムとコンテンツにて必要十分な保護を施すことを推奨します。<br><br>コンテンツからのメソッド呼び出しについて詳しくは「コンテンツ連携機能」の章を参照してください。<br><br></div>

<!-- sce_hd3 -->
<a name="Heading3_4">
<h2>
 4 <!-- hp --><b>ファイルダウンロード機能</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">インターネットブラウザユーティリティによってWWWサイトからファイルをダウンロードする場合、初期化パラメータで指定した内容やサイト側のコンテンツ記述方法によって動作が変化します。目的の動作を得るためには適切な設定やコンテンツ作成が必要となります。<br>本章ではファイルダウンロードの標準動作および目的別の対応について説明します。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_4_1">
<h3>
<a href="#Heading3_4"> 4. </a>1 
<!-- hp1 --><b>ダウンロード標準動作</b><br>
</a>
</h3>
<div style="margin-left:50px;">インターネットブラウザユーティリティによるダウンロード機能の標準動作は以下の通りです。<br></div>
</ul>
<div style="margin-left:55px;"><ol>
<li VALUE=1> ダウンロード開始確認を行う。</li>
<li VALUE=2> URLで指定されたファイル名、およびHTTPレスポンスヘッダ"Content-Type"で指定されたMIME-Typeの組み合わせによって、保存先ディレクトリを自動決定する。</li>
</ol></div>
<div style="margin-left:70px;"><ul>
<li> HTTPレスポンスヘッダ"Content-Disposition"によってファイル名が指定された場合はそのファイル名が優先されます。
<li> ビデオデータ等、一部インターネットブラウザにて自動的にファイル名を変更する形式も存在します。
</ol></div>
<div style="margin-left:55px;"><ol>
<li VALUE=3> 保存先確認を行う。</li>
</ol></div>
<div style="margin-left:70px;"><ul>
<li> ビデオデータ等、一部の形式を除いて、ユーザによるファイル名および保存先ディレクトリの変更ができます。
</ol></div>
<div style="margin-left:55px;"><ol>
<li VALUE=4> ダウンロードを開始する。</li>
</ol></div>
<div style="margin-left:70px;"><ul>
<li> ダウンロード中は進捗が表示されます。
<li> ダウンロード先確認画面にてユーザが保存先ディレクトリやファイル名を変更した場合は、その保存先ディレクトリおよびファイル名にてダウンロードを行います。
<li> 必要なディレクトリが存在しない場合は自動的に生成します。
</ol></div>
<div style="margin-left:55px;"><ol>
<li VALUE=5> ダウンロード終了確認を行う。</li>
</ul>
</ol></div>
<div style="margin-left:50px;"><br>ファイル名およびMIME-Typeとダウンロード先ディレクトリの関係についてはPSP&reg; Developer Networkウェブサイト上で公開されている「PSP&trade; (PlayStation&reg; Portable)インターネットブラウザ向けコンテンツ作成ガイドライン(開発者向け)」を参照してください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_4_2">
<h3>
<a href="#Heading3_4"> 4. </a>2 
<!-- hp1 --><b>ゲームプログラムによるディレクトリとファイル名の指定</b><br>
</a>
</h3>
<div style="margin-left:50px;">保存先ディレクトリやファイル名をゲームプログラムから指定したい場合は、初期化パラメータにディレクトリ名ないしファイル名、またはその両方を指定します。<br>保存先ディレクトリやファイル名を指定した場合、ユーザによる変更は制限され、コンテンツ側の指定も無効となります。<br>アップロードするファイルのディレクトリとファイル名をゲームプログラムから指定したい場合も、初期化パラメータにディレクトリ名およびファイル名を指定します。<br>アップロードするファイルのディレクトリとファイル名を指定した場合、コンテンツ上のフォームに指定したパスが自動的に入力され、ユーザによる変更は制限されます。<br><br>設定方法の詳細についてはUtility_InternetBrowser-Referenceの<a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerFileParam">SceUtilityHtmlViewerFileParam</a>を参照してください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_4_3">
<h3>
<a href="#Heading3_4"> 4. </a>3 
<!-- hp1 --><b>コンテンツによるファイル名の指定</b><br>
</a>
</h3>
<div style="margin-left:50px;">初期化パラメータにファイル名を指定しない場合はコンテンツのURLで指定したファイル名でダウンロードされますが、CGI等でHTTPレスポンスヘッダ"Content-Disposition"を用いてファイル名を指定した場合は、そちらが優先されます。<br>ただし、ビデオデータ等、一部インターネットブラウザにて自動的にファイル名を変更する形式も存在します。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_4_4">
<h3>
<a href="#Heading3_4"> 4. </a>4 
<!-- hp1 --><b>保存先ディレクトリやファイル名の変更の制限</b><br>
</a>
</h3>
<div style="margin-left:50px;">保存先ディレクトリやファイル名をゲームプログラムから指定した場合は、ユーザによるそれらの変更は自動的に制限されます。<br>それ以外の場合は、初期化パラメータに"保存先確認ダイアログを表示しない"あるいは"保存先ディレクトリおよびファイル名の変更をさせない"指定を明示的に行うことで変更を制限できます。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_4_5">
<h3>
<a href="#Heading3_4"> 4. </a>5 
<!-- hp1 --><b>ユーザインタフェースの制限</b><br>
</a>
</h3>
<div style="margin-left:50px;">"保存先確認ダイアログを表示しない"、"保存先ディレクトリおよびファイル名の変更をさせない"指定以外にも"ダウンロード開始時の確認ダイアログを表示しない"指定、"ダウンロード終了時の確認ダイアログを表示しない"指定ができます。<br><br>"ダウンロード開始時の確認ダイアログを表示しない"指定を行った場合は、ダウンロード対象のコンテンツを選択すると即座に保存先確認ダイアログの表示に進みます。<br><br>"ダウンロード終了時の確認ダイアログを表示しない"指定を行った場合は、ダウンロードが終了するとそのままダウンロード画面が閉じ、コンテンツ表示に戻ります。<br><br>"保存先確認ダイアログを表示しない"指定を行った場合は、ダウンロード開始確認がなされると即座にダウンロードが開始されます。保存先は、保存先確認ダイアログを表示する場合と同様に決定されます。<br><br>"保存先ディレクトリおよびファイル名の変更をさせない"指定を行った場合は、保存先確認ダイアログにおいて保存先ディレクトリおよびファイル名の項目がグレーアウトされ変更ができなくなります。<br><br>"保存先確認ダイアログを表示しない"指定を行った場合、すでにファイルが存在する場合でも上書き確認を行いませんが、"上書き確認を有効にする"指定を行うことで上書き確認をさせることができます。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_4_6">
<h3>
<a href="#Heading3_4"> 4. </a>6 
<!-- hp1 --><b>注意事項</b><br>
</a>
</h3>

<!-- sce_title -->
<a Name ="HeadingT_4_6_2">
<div style="margin-left:40px;"><h4><b>保存先ディレクトリの自動決定について</b><br><br></h4></div></a>

<div style="margin-left:67px;">システムソフトウェアバージョン2.80において、フォト系およびミュージック系のファイルのダウンロードにおける保存先ディレクトリが以下のように変更となりました。<br><br></div>
<div style="margin-left:90px;">
<table border=1>
<tr>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>ファイル</b>&nbsp;&nbsp;</td>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>従来の保存先</b>&nbsp;&nbsp;</td>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>2.80以降の保存先</b>&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;フォト系&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;/PSP/PHOTO&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;/PICTURE&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;ミュージック系&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;/PSP/MUSIC&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;/MUSIC&nbsp;&nbsp;</td>
</tr>
</table>
</div>
<br>
<br>
<div style="margin-left:67px;">それに伴い、インターネットブラウザユーティリティでは以下のような動作をするようになっています。<br><br></div>
<div style="margin-left:90px;">
<table border=1>
<tr>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>ファイル</b>&nbsp;&nbsp;</td>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>devkit 2.7.1以前のタイトルにおける保存先</b>&nbsp;&nbsp;</td>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>devkit 2.8.0以降のタイトルにおける保存先</b>&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;フォト系&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;/PSP/PHOTO&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;/PICTURE&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;ミュージック系&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;/PSP/MUSIC&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;/MUSIC&nbsp;&nbsp;</td>
</tr>
</table>
</div>
<br>
<br>
<div style="margin-left:67px;">これはあくまでもデフォルトの保存先ディレクトリの話ですが、保存先の変更禁止を指定した場合や保存先確認を行わない指定をした場合は上記のルールに基き保存先が確定します。<br><br></div>

<!-- sce_hd3 -->
<a name="Heading3_5">
<h2>
 5 <!-- hp --><b>自動HTTP認証機能</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">ゲームプログラムが指定したサイトをブラウジングする際に、ユーザにユーザ名、パスワードを入力させることなく自動的にHTTP認証を実行することができます。<br>これにより、ユーザに意識させること無く、ゲームプログラム以外からのサイトへのアクセスをブロックすることが可能となります。<br>また、指定により認証情報を本体に保存させることで、ホームメニューから呼び出されたインターネットブラウザからのアクセスを許可することもできます。<br>本章では自動HTTP認証機能のゲームプログラム側およびコンテンツ側での対応方法について説明します。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_5_1">
<h3>
<a href="#Heading3_5"> 5. </a>1 
<!-- hp1 --><b>認証情報と適用条件</b><br>
</a>
</h3>
<div style="margin-left:50px;">ゲームプログラムから、自動HTTP認証に適用する認証情報を指定します。<br>指定する認証情報は<br></div>
</ol>
<div style="margin-left:40px;"><ul>
<li> URL
<li> ユーザ名
<li> パスワード
<li> 認証手段指定、本体保存指定
</ul></div>
<div style="margin-left:50px;">であり、これらは複数セット指定することができます。<br>また、認証情報とは別に、自動HTTP認証を適用するサイトのRealm(AuthName)を指定します。これはひとつのみ指定可能です。<br><br>自動HTTP認証が適用される条件は以下の通りです。<br></div>
<div style="margin-left:40px;"><ul>
<li> コンテンツ側のRealmが、ゲームプログラムが指定したもので始まる
<li> コンテンツのURLが、ゲームプログラムが指定したもので始まる<br>※最長一致するものを含む認証情報が採用されます。
<li> コンテンツ側の認証手段が、ゲームプログラムが指定したものと一致する
</ul></div>
<div style="margin-left:50px;">これらが全て満たされた場合に限り自動的にHTTP認証が行われ、目的のページが表示されます。<br><br>認証情報等の指定方法の詳細についてはUtility_InternetBrowser-Referenceの<a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerParam">SceUtilityHtmlViewerParam</a>、<a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerAuthInfo">SceUtilityHtmlViewerAuthInfo</a>を参照してください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_5_2">
<h3>
<a href="#Heading3_5"> 5. </a>2 
<!-- hp1 --><b>コンテンツの対応</b><br>
</a>
</h3>
<div style="margin-left:50px;">コンテンツ側は、まずサーバーの設定によってHTTP認証を有効にする必要があります。<br>その上で、自動HTTP認証を行うコンテンツ毎に以下を行います。<br></div>
<div style="margin-left:40px;"><ul>
<li> 認証手段を、ゲームプログラムと合わせたものに設定する<br>※BASIC認証あるいはDIGEST認証のみ利用可能です。
<li> Realm(AuthName)を、ゲームプログラムが指定する文字列で始まるものに設定する
<li> ユーザ名、パスワードを、ゲームプログラムと合わせたものに設定する
<li> URLをゲームプログラムから指定する
</ul></div>
<div style="margin-left:50px;"><br>サーバーの設定方法についてはご利用のサーバーソフトウェアのマニュアルを参照していただくか、サーバー管理担当者にご相談ください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_5_3">
<h3>
<a href="#Heading3_5"> 5. </a>3 
<!-- hp1 --><b>認証情報の保存</b><br>
</a>
</h3>
<div style="margin-left:50px;">ゲームプログラムから指定する認証情報毎に、認証成功時に本体に認証情報を保存するかどうかを指定することができます。<br>認証情報を保存すると、ホームメニューから呼び出されたインターネットブラウザでも該当のコンテンツで自動HTTP認証を行うことができます。<br>ただし、Realm(AuthName)については保存できないため、認証情報を保存する場合はRealm(AuthName)としてインターネットブラウザがデフォルトで指定する文字列で始まるものを使用する必要があります。<br>Realm(AuthName)が一致しない場合は通常の動作となり、認証情報の自動補完が行われることになります。つまりその場合、認証情報に含まれるユーザ名が明らかになってしまいます。<br>また、本体の認証情報は古いものから自動的に削除されることやユーザの意思により削除されることがありますので、本体に保存した認証情報が保持されることを前提としたゲームデザインは推奨できません。<br><br>認証情報保存の指定方法の詳細についてはUtility_InternetBrowser-Referenceの<a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerAuthInfo">SceUtilityHtmlViewerAuthInfo</a>を参照してください。<br><br></div>

<!-- sce_hd3 -->
<a name="Heading3_6">
<h2>
 6 <!-- hp --><b>コンテンツ連携機能</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">コンテンツにPSP&reg;専用のプラグインの定義およびそれを使用するJavaScriptの記述を行い、ゲームプログラムの対応をすることで、コンテンツとゲームプログラムの連携が可能となります。<br>本章ではコンテンツ連携機能のゲームプログラム側およびコンテンツ側での対応方法について説明します。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_6_1">
<h3>
<a href="#Heading3_6"> 6. </a>1 
<!-- hp1 --><b>プラグインと連携機能</b><br>
</a>
</h3>
<div style="margin-left:50px;">現在対応しているプラグインおよび提供されるコンテンツ連携機能は以下の通りです。<br></div>

<!-- sce_title -->
<a Name ="HeadingT_6_1_3">
<div style="margin-left:40px;"><h4><b>PSP&reg;プラグイン</b><br><br></h4></div></a>

</ul>
<div style="margin-left:55px;"><ol>
<li VALUE=1> タイプ(プラグイン識別子)<br>application/x-psp-plugin</li>
<li VALUE=2> 機能</li>
</ol></div>
<div style="margin-left:70px;"><ul>
<li> コンテンツからの戻り値の取得
<li> インターネットブラウザの終了
</ul></div>
</ol>

<!-- sce_title -->
<a Name ="HeadingT_6_1_4">
<div style="margin-left:40px;"><h4><b>PSP&reg;拡張プラグイン</b><br><br></h4></div></a>

</ol>
<div style="margin-left:55px;"><ol>
<li VALUE=1> タイプ(プラグイン識別子)<br>application/x-psp-extplugin</li>
<li VALUE=2> 機能</li>
</ol></div>
<div style="margin-left:70px;"><ul>
<li> コンテンツからのメソッド呼び出し
<li> プラグインインスタンスコールバック呼び出し
</ul></div>
</ol>
<div style="margin-left:50px;"><br>PSP&reg;プラグインによる連携機能を有効にするためには、ユーザインタフェースを制限モードあるいは無しモードに設定する必要があります。これは、このプラグインがインターネットブラウザの終了機能を持つことから悪意のあるコンテンツによる攻撃を避けるためです。<br><br>連携機能を利用するためには、以下のようにコンテンツにPSP&reg;専用のプラグインの定義を記述します。<br></div>

<!-- sce_title -->
<a Name ="HeadingT_6_1_5">
<div style="margin-left:40px;"><h4><b>記述例</b><br><br></h4></div></a>

        <div style="margin-left:80px;"><pre><font size=3>&lt;!-- for PSP Plugin --&gt;
&lt;object name="psp" type=&quot;application/x-psp-plugin&quot;&gt;&lt;/object&gt;
&lt;!-- for PSP Ext-Plugin --&gt;
&lt;object name="pspext" type=&quot;application/x-psp-extplugin&quot;&gt;&lt;/object&gt;
</font></pre></div>
<div style="margin-left:50px;"><br>上記記述例でnameアトリビュートは"psp"、"pspext"としていますが、任意の名前を指定可能です。JavaScriptスクリプト内ではここで指定した名前でオブジェクトを扱うことになります。<br><br>コンテンツ側の記述についてはPSP&reg; Developer Networkウェブサイト上で公開されている「PSP&trade; (PlayStation&reg; Portable)インターネットブラウザ向けコンテンツ作成ガイドライン(開発者向け)」も併せて参照してください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_6_2">
<h3>
<a href="#Heading3_6"> 6. </a>2 
<!-- hp1 --><b>コンテンツからの戻り値の取得</b><br>
</a>
</h3>
<div style="margin-left:50px;">コンテンツからの戻り値の取得は、ゲームプログラム側が提供するバッファにコンテンツ側のJavaScriptスクリプトからデータを書き込むことで実現します。<br>コンテンツから戻り値を書き込むには、以下のように記述します。<br></div>

<!-- sce_title -->
<a Name ="HeadingT_6_2_6">
<div style="margin-left:40px;"><h4><b>記述例</b><br><br></h4></div></a>

        <div style="margin-left:80px;"><pre><font size=3>&lt;script language=&quot;JavaScript&quot;&gt;
&lt;!--
a = 10;
b = new Array(3);
b[0] = 1; b[1] = 2; b[2] = 3;
if (psp) {
    psp.save(a);
    psp.save(b);
}
//--&gt;
&lt;/script&gt;
</font></pre></div>
<div style="margin-left:50px;"><br>データの書き込みにはsave()メソッドを使用します。書き込まれるデータはJavaScriptの内部表現に基く形式の文字列となり、例えば上記記述例でaの値が戻り値となった場合は"10"がバッファに書き込まれ、bの値が戻り値になった場合は"1,2,3"がバッファに書き込まれます。<br>また、インターネットブラウザユーティリティの起動中に複数回のデータ書き込みがあった場合は、バッファは常に最後に行われた書き込みで上書きされます。上記記述例では、bの値が有効となります。<br><br>取得方法の詳細についてはUtility_InternetBrowser-Referenceの<a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerParam">SceUtilityHtmlViewerParam</a>、<a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerBuffer">SceUtilityHtmlViewerBuffer</a>を参照してください。<br><br>コンテンツ側の記述についてはPSP&reg; Developer Networkウェブサイト上で公開されている「PSP&trade; (PlayStation&reg; Portable)インターネットブラウザ向けコンテンツ作成ガイドライン(開発者向け)」も併せて参照してください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_6_3">
<h3>
<a href="#Heading3_6"> 6. </a>3 
<!-- hp1 --><b>インターネットブラウザの終了</b><br>
</a>
</h3>
<div style="margin-left:50px;">コンテンツからの指定によりインターネットブラウザを終了させることができます。この機能は、コンテンツ連携機能が有効であれば、コンテンツ側の記述のみで実現可能です。<br>インターネットブラウザを終了させるには、以下のように記述します。<br></div>

<!-- sce_title -->
<a Name ="HeadingT_6_3_7">
<div style="margin-left:40px;"><h4><b>記述例</b><br><br></h4></div></a>

        <div style="margin-left:80px;"><pre><font size=3>&lt;script language=&quot;JavaScript&quot;&gt;
&lt;!--
a = 10;
if (psp) {
    psp.save(a);
    psp.exit();
}
//--&gt;
&lt;/script&gt;
</font></pre></div>
<div style="margin-left:50px;"><br>インターネットブラウザを終了させるにはexit()メソッドを使用します。上記記述例では、save()メソッドで戻り値として"10"を書き込み、次のexit()メソッドで終了させます。<br><br>exit()メソッドが実行された際のインターネットブラウザの挙動は、ユーザによって終了操作が行われた場合と同じです。<br>つまり、特に指定が無い場合は終了確認のダイアログが表示され、ユーザに終了かキャンセルかを選択させます。終了確認をさせたくない場合は、初期化パラメータに"終了確認ダイアログの非表示"を指定してください。<br>また、終了時のネットワーク接続の自動切断に関しても、初期化パラメータに指定した通りに行われます。<br><br>コンテンツ側の記述についてはPSP&reg; Developer Networkウェブサイト上で公開されている「PSP&trade; (PlayStation&reg; Portable)インターネットブラウザ向けコンテンツ作成ガイドライン(開発者向け)」も併せて参照してください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_6_4">
<h3>
<a href="#Heading3_6"> 6. </a>4 
<!-- hp1 --><b>コンテンツからのメソッド呼び出し</b><br>
</a>
</h3>
<div style="margin-left:50px;">コンテンツからのメソッド呼び出しは、ゲームプログラム側が名前を付けて登録したメソッドをコンテンツ側のJavaScriptスクリプトから同じ名前を指定して呼び出すことで実現します。<br>コンテンツからメソッドを呼び出すには、以下のように記述します。<br></div>

<!-- sce_title -->
<a Name ="HeadingT_6_4_8">
<div style="margin-left:40px;"><h4><b>記述例</b><br><br></h4></div></a>

        <div style="margin-left:80px;"><pre><font size=3>&lt;script language=&quot;JavaScript&quot;&gt;
&lt;!--
no = 10;
if (pspext) {
    ret = pspext.PlaySound(no);
    alert(&quot;ret=&quot;+ret);
}
//--&gt;
&lt;/script&gt;
</font></pre></div>
<div style="margin-left:67px;"><br></div>
<div style="margin-left:50px;">上記記述例で呼び出している"PlaySound"がゲームプログラムが登録したメソッドです。上記記述例では、引数を1つのみ指定して呼び出し、戻り値を得ています。戻り値はゲームプログラムにより整数型あるいは文字列型を指定可能です。<br><br>ゲームプログラムにてメソッドを登録するには、以下のように記述します。<br></div>

<!-- sce_title -->
<a Name ="HeadingT_6_4_9">
<div style="margin-left:40px;"><h4><b>記述例</b><br><br></h4></div></a>

        <div style="margin-left:80px;"><pre><font size=3>static const <a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerUserMethodInfo">SceUtilityHtmlViewerUserMethodInfo</a> method_info[] = {
    }
        /* .plugin   = */ <a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SCE_UTILITY_HTMLVIEWER_MIMETYPE_EXT_PLUGIN">SCE_UTILITY_HTMLVIEWER_MIMETYPE_EXT_PLUGIN</a>,
        /* .name     = */ &quot;PlaySound&quot;,
        /* .callback = */ UserMethod_PlaySound,
        /* .usrdata  = */ (void*)0,
        /* .flag     = */ 0
    }
};
…
static const <a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerParam">SceUtilityHtmlViewerParam</a> param = {
    …
    /* .num_method      = */ 1,
    /* .method          = */ method_info,
    /* .plugin_callback = */ NULL
};
…
static int UserMethod_PlaySound(int instance, int argc, char** argv,
                                void* usrdata,
                                unsigned int* resulttype, void** result)
{
    …
    int no = atoi(argv[0]);
    if (no &lt; 0 || no &gt; MY_MAX_SOUND_NUM) {
        return -1;
    }
    int ret = MyPlaySound(no, …);
    …
    *resulttype = SCE_UTILITY_HTMLVIEWER_USER_METHOD_RESULT_TYPE_INT;
    *result = (void*)ret;
    return 0;
}
</font></pre></div>
<div style="margin-left:67px;"><br></div>
<div style="margin-left:50px;">上記記述例でUserMethod_PlaySound()が登録するメソッドに対応するコールバック関数です。呼び出されると、引数に応じた処理を行い、メソッドの戻り値を設定してリターンします。<br>正常に処理を行った場合は0をコールバックの戻り値とします。0以外を戻り値とした場合はエラーとみなしメソッド呼び出しの結果はundefinedとなります。<br><br>メソッド登録方法の詳細についてはUtility_InternetBrowser-Referenceの<a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerParam">SceUtilityHtmlViewerParam</a>、<a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerUserMethodInfo">SceUtilityHtmlViewerUserMethodInfo</a>、<a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerUserMethodCallback">SceUtilityHtmlViewerUserMethodCallback</a>を参照してください。<br><br>コンテンツ側の記述についてはPSP&reg; Developer Networkウェブサイト上で公開されている「PSP&trade; (PlayStation&reg; Portable)インターネットブラウザ向けコンテンツ作成ガイドライン(開発者向け)」も併せて参照してください。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_6_5">
<h3>
<a href="#Heading3_6"> 6. </a>5 
<!-- hp1 --><b>プラグインインスタンスコールバック呼び出し</b><br>
</a>
</h3>
<div style="margin-left:50px;">プラグインインスタンスコールバック呼び出しは、PSP&reg;専用プラグインのインスタンスが生成または破棄されたタイミングで実施されます。<br>現在は、PSP&reg;拡張プラグインのみがコールバック呼び出しの対象となります。<br>プラグインインスタンスが生成または破棄されるのは以下のいずれかのタイミングです。<br></div>
</ol>
<div style="margin-left:40px;"><ul>
<li> PSP&reg;専用プラグインの定義を含むページを開いた時(生成)
<li> PSP&reg;専用プラグインの定義を含むページを閉じた時(破棄)
<li> PSP&reg;専用プラグインの定義を含むページをリロードした時(破棄&amp;生成)
<li> PSP&reg;専用プラグインの定義を含むページで文字サイズの変更等、表示メニュー内の設定変更を行った時(破棄&amp;生成)
</ul></div>
<div style="margin-left:50px;"><br>ゲームプログラムにてインスタンスコールバックを登録するには、以下のように記述します。<br></div>

<!-- sce_title -->
<a Name ="HeadingT_6_5_10">
<div style="margin-left:40px;"><h4><b>記述例</b><br><br></h4></div></a>

        <div style="margin-left:80px;"><pre><font size=3>static const <a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerPluginCallback">SceUtilityHtmlViewerPluginCallback</a> plugin_callback = {
    /* .PluginInstanceNew     = */ OnInstanceNew,
    /* .PluginInstanceDestroy = */ OnInstanceDestroy,
    /* .usrdata               = */ 0
};
…
static const <a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerParam">SceUtilityHtmlViewerParam</a> param = {
    …
    /* num_method      = */ 1,
    /* method          = */ method_info,
    /* plugin_callback = */ &amp;plugin_callback
};
…
static int OnInstanceNew(const char* plugin,
                         void *instance,
                         int argc, char** argn char** argv, void* usrdata)
{
    …
    …
    return 0;
}
…
static int OnInstanceDestroy(const char* plugin,
                             void *instance,
                             int argc, char** argn char** argv, void* usrdata)
{
    …
    …
    return 0;
}
</font></pre></div>
<div style="margin-left:67px;"><br></div>
<div style="margin-left:50px;">上記記述例でOnInstanceNew()およびOnInstanceDestroy()がプラグインインスタンスの生成および破棄に対応するコールバック関数です。引数としてインスタンス識別子とそのインスタンスに指定されたアトリビュートが得られます。<br>インスタンス識別子はインスタンス生成毎に割り振られるユニークな値で、そのインスタンスのメソッド呼び出しにおいても同じ値が引数として得られるので、ゲームプログラムはインスタンス毎に処理を切り替える事が可能です。<br>アトリビュートはそのインスタンスに対応するコンテンツ上のobjectタグに記述されたもので、"name"や"type"、およびそれぞれの値も含まれます。コンテンツ側でアトリビュートを動的に変えることでゲームプログラム側でそれに応じた処理の変更が可能です。<br>コールバックの戻り値は0とします。<br><br>インスタンスコールバック登録方法の詳細についてはUtility_InternetBrowser-Referenceの<a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerParam">SceUtilityHtmlViewerParam</a>、<a href="../utility/Utility_InternetBrowser-Reference-Japanese.htm#SceUtilityHtmlViewerPluginCallback">SceUtilityHtmlViewerPluginCallback</a>を参照してください。<br><br>コンテンツ側の記述についてはPSP&reg; Developer Networkウェブサイト上で公開されている「PSP&trade; (PlayStation&reg; Portable)インターネットブラウザ向けコンテンツ作成ガイドライン(開発者向け)」も併せて参照してください。<br><br></div>

<!-- sce_hd3 -->
<a name="Heading3_7">
<h2>
 7 <!-- hp --><b>インターネットブラウザユーティリティの制限</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">インターネットブラウザユーティリティにはいくつか機能上の制限があります。<br>本章ではそれらの制限について説明します。<br></div>

<!-- sce_hd4 -->
<a name="Heading4_7_1">
<h3>
<a href="#Heading3_7"> 7. </a>1 
<!-- hp1 --><b>ヘルパーアプリケーション機能</b><br>
</a>
</h3>
<div style="margin-left:50px;">ホームメニューから呼び出されたインターネットブラウザでは、予め登録された種類のコンテンツに対応したヘルパーアプリケーションを実行する機能を持っていますが、インターネットブラウザユーティリティではこの機能を一部無効としています。<br>具体的には以下のコンテンツが利用できません。<br></div>
<div style="margin-left:40px;"><ul>
<li> 一部のビデオ配信コンテンツ
<li> RSSチャンネル用のXMLデータ
</ul></div>
<div style="margin-left:50px;"><br></div>

<!-- sce_hd3 -->
<a name="Heading3_8">
<h2>
 8 <!-- hp --><b>関連ファイル</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">インターネットブラウザユーティリティを使用するために必要なファイルは次の通りです。<br><br></div>
<div style="margin-left:90px;">
<table border=1>
<tr>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>カテゴリ</b>&nbsp;&nbsp;</td>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>ファイル名</b>&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;ヘッダファイル&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;utility_htmlviewer.h&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;スタブライブラリファイル&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;utility_stub.a&nbsp;&nbsp;</td>
</tr>
</table>
</div>
<br>
<p><p><hr>
<div ALIGN="right">
    &copy;2009 Sony Computer Entertainment Inc.  All Rights Reserved.<br>
    SCE CONFIDENTIAL
</div>
</body>
</html>
