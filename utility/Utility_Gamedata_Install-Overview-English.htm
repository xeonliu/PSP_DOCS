<html lang="en">
<head>
<title>Utility_Gamedata_Install-Overview</title>
<meta http-equiv="Content-Type" content= text/html; charset=iso-8859-1>
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta http-equiv="Content-Style-Type" content="Text/css>
<meta name="Author"Content=" Sony Computer Entertainment Inc.">
</head>
<body bgcolor="#ffffff" text="#000000" >
<a name=TOP></a>
<table WIDTH="100%">
<tr><td>
<h3>PSP&trade; Programmer Tool Runtime Library Release 6.3.0</h3>
</td>
</tr>
</table>
<hr noshade size=6>
<center><h1>
Game Data Install Utility Overview
</h1></center>
</a>
<!-- sce_hd1 -->

<!-- sce_hd3 -->
<a name="Heading3_1">
<h2>
 1 <!-- hp --><b>About Utilities</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">For an overview of utilities, refer to the "Utility Services Overview" document.<br><br>The game data install utility provides functions for copying data from a specific location on a UMD&trade; to the /PSP/SAVEDATA/(savedata_dir) directory on a Memory Stick&trade;.<br><br></div>

<!-- sce_hd3 -->
<a name="Heading3_2">
<h2>
 2 <!-- hp --><b>Install Source Data Structure</b>
<hr noshade>
</h2>


<!-- sce_hd4 -->
<a name="Heading4_2_1">
<h3>
<a href="#Heading3_2"> 2. </a>1 
<!-- hp1 --><b>Directory/File Structure</b><br>
</a>
</h3>
<div style="margin-left:50px;">The directory/file structure on the UMD&trade; is shown below.<br></div>

<div style="margin-left:67px;">
<p>
<img src="gif/Utility_Gamedata_Install-Overview-English001.gif">
</div>
<div style="margin-left:50px;"><br>* Only files and directories shown above may be created.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_2_2">
<h3>
<a href="#Heading3_2"> 2. </a>2 
<!-- hp1 --><b>INSDIR</b><br>
</a>
</h3>
<div style="margin-left:50px;">This directory contains the source data files that will be installed by the game data install utility. It can hold a maximum of 1,024 files, consisting of a combination of content information and game data files. No subdirectories may be created under INSDIR.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_2_3">
<h3>
<a href="#Heading3_2"> 2. </a>3 
<!-- hp1 --><b>Content Information Files</b><br>
</a>
</h3>

<!-- sce_title -->
<a Name ="HeadingT_2_3_1">
<div style="margin-left:40px;"><h4><b>What are content information files?</b><br><br></h4></div></a>

<div style="margin-left:67px;">Content information consists of images and movies that are representative of the game data that is installed, as well as background music (BGM). Content information is displayed in a list by PSP&trade; system software save data management.<br></div>

<!-- sce_title -->
<a Name ="HeadingT_2_3_2">
<div style="margin-left:40px;"><h4><b>File configuration</b><br><br></h4></div></a>

<div style="margin-left:67px;">Content information consists of multiple files.<br></div>
</ol>
<div style="margin-left:70px;"><ul>
<li> Still image icon:  ICON0.PNG
<li> Movie icon:  ICON1.PMF
<li> Content information background image:  PIC1.PNG
<li> BGM:  SND0.AT3
</ul></div>

<!-- sce_title -->
<a Name ="HeadingT_2_3_3">
<div style="margin-left:40px;"><h4><b>Still image icon</b><br><br></h4></div></a>

<div style="margin-left:67px;">A still image icon is displayed as an alternate icon when the focus is not on the content or when no movie icon has been set when a movie icon is being read.<br>Still image icons are displayed by PSP&trade; system software but are not displayed by the utility.<br>This is a required file. Be sure to create it.<br></div>
<div style="margin-left:70px;"><ul>
<li> Image size:  144 x 80 pixels
<li> Image format:  PNG (24 bits)
<li> Filename:  ICON0.PNG
<li> Creation tool:  Use a commercially available tool.
</ul></div>

<!-- sce_title -->
<a Name ="HeadingT_2_3_4">
<div style="margin-left:40px;"><h4><b>Movie icon</b><br><br></h4></div></a>

<div style="margin-left:67px;">A movie can be displayed as an icon. A movie icon can also have audio.<br>When playback ends, the movie will start again from the beginning but the audio will not continue. To continue playing audio while the movie is looped, you can use BGM. However, BGM will not be synchronized with the movie icon.<br>If there is BGM, then even if a movie has audio, only the BGM will be played.<br>BGM is optional and can be omitted if it is not needed.<br>Although a movie icon is played by PSP&trade; system software, it is not displayed or played by the utility.<br></div>
<div style="margin-left:70px;"><ul>
<li> Image size:  144 x 80 pixels
<li> Video Format:  AVC only, consisting of encoded IDR-pictures and P-pictures <br>       (Main Profile Level 2.1 (maximum bit rate: 4.8Mbps)) *Same as for <br>       games <br>Frame rate:  29.97fps progressive
<li> Audio Format:  ATRAC3plus&trade;<br>Sampling frequency:  44.1kHz<br>Channels:  2 channel stereo
<li> Multiplex format:  PSMF
<li> File size:  Maximum 500 kilobytes including BGM file
<li> Filename:  ICON1.PMF
<li> Creation tool:  Use UMD&trade; Stream Composer (for Game Movie) and PSMF Composer provided by SCE.
</ul></div>

<!-- sce_title -->
<a Name ="HeadingT_2_3_5">
<div style="margin-left:40px;"><h4><b>Content information background</b><br><br></h4></div></a>

<div style="margin-left:67px;">This is the background image.<br>The content information background is optional and can be omitted if it is not needed.<br>It is displayed by PSP&trade; system software, but not by the utility.<br></div>
<div style="margin-left:70px;"><ul>
<li> Image size:  480 x 272 pixels
<li> Image format:  PNG (24 bits)
<li> Filename:  PIC1.PNG
<li> Creation tool:  Use a commercially available tool.
</ul></div>

<!-- sce_title -->
<a Name ="HeadingT_2_3_6">
<div style="margin-left:40px;"><h4><b>BGM</b><br><br></h4></div></a>

<div style="margin-left:67px;">This is audio. When a loop range is specified, BGM can be played in a loop without stopping.<br>BGM is optional and can be omitted if it is not needed.<br>BGM is played by PSP&trade; system software, but not by the utility.<br></div>
<div style="margin-left:70px;"><ul>
<li> Audio format: <br>Format:  ATRAC3plus&trade;<br>Sampling frequency:  44.1kHz<br>Channels:  2 channel stereo
<li> File size:  Maximum 500 kilobytes including the movie icon file
<li> Filename:  SND0.AT3
<li> Creation tool:  Use at3tool provided by SCE.
</ul></div>

<!-- sce_hd4 -->
<a name="Heading4_2_4">
<h3>
<a href="#Heading3_2"> 2. </a>4 
<!-- hp1 --><b>Game Data Files</b><br>
</a>
</h3>

<!-- sce_title -->
<a Name ="HeadingT_2_4_7">
<div style="margin-left:40px;"><h4><b>Filename restrictions</b><br><br></h4></div></a>

<div style="margin-left:67px;">Names of data files are restricted as follows.<br></div>
<div style="margin-left:70px;"><ul>
<li> Length:  8.3 format
<li> Available characters:  A to Z, 0 to 9
</ul></div>
<div style="margin-left:67px;">Also, the following names are reserved by the system, so they cannot be used for gamedata filenames.<br></div>
<div style="margin-left:70px;"><ul>
<li> *.SFO
<li> ICON*.* (except ICON0.PNG and ICON1.PMF)
<li> PIC*.* (except PIC1.PNG)
<li> SND*.* (except SND0.AT3)
</ul></div>
<div style="margin-left:67px;">An asterisk (*) indicates an arbitrary length string of any characters.<br>When the utility checks the UMD&trade;, it checks the filenames and returns an error if an invalid name is detected.<br></div>

<!-- sce_title -->
<a Name ="HeadingT_2_4_8">
<div style="margin-left:40px;"><h4><b>File encryption</b><br><br></h4></div></a>

<div style="margin-left:67px;">Middleware archive formats or title-specific formats are permitted as game data formats, but encryption and digital signatures must be used with these to detect tampering.<br>Create game data so that files that have been rewritten or renamed will not function properly if a user tries to access them.<br><br>You can use the iofilemgr_dnas format provided by SCE for encrypting files.<br>For information on creating data in this format, refer to the document "iofilemgr_dnas-format Game Data Authoring Guide."<br>For information on accessing files in this format, refer to the document "iofilemgr_dnas-format Game Data API."<br><br></div>

<!-- sce_title -->
<a Name ="HeadingT_2_4_9">
<div style="margin-left:40px;"><h4><b>Other -- Files that cannot be placed in INSDIR</b><br><br></h4></div></a>


<!-- sce_hd6 -->
<a name="Heading6_2_4_1">
<div style="margin-left:63px;"><h4><b>PARAM.SFO</b><br><br></h4></a></div>
<div style="margin-left:80px;">This file is generated automatically from data passed to the game data install utility.<br></div>

<!-- sce_hd6 -->
<a name="Heading6_2_4_2">
<div style="margin-left:63px;"><h4><b>Program files</b><br><br></h4></a></div>
<div style="margin-left:80px;">Only data files such as BGM or texture images can be installed as game data on a Memory Stick&trade;. Program files (excluding scripts) cannot be placed in the INSDIR directory.<br><br></div>

<!-- sce_hd3 -->
<a name="Heading3_3">
<h2>
 3 <!-- hp --><b>Types</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">The game data install utility can be run either with a GUI or without, depending on the type that is specified.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_1">
<h3>
<a href="#Heading3_3"> 3. </a>1 
<!-- hp1 --><b>Running Without a GUI</b><br>
</a>
</h3>
<div style="margin-left:50px;">If the game data install utility is launched with this type specified, no GUI will be displayed.<br>Information needed to display a progress bar or the time remaining in an operation must be obtained by referencing member variables of the structure that is passed to the utility, and the game must display the progress on the screen.<br><br>For information concerning exclusive control of the game program's drawing operation when the <a href="../utility/Utility_Gamedata_Install-Reference-English.htm#sceUtilityGamedataInstallUpdate">sceUtilityGamedataInstallUpdate</a>() function is called, refer to "Exclusive Control of the Utility Service's sceUtilityXxxUpdate() Function Call and the Game Program's Drawing Operation" in the "Utility Services Overview" document.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_3_2">
<h3>
<a href="#Heading3_3"> 3. </a>2 
<!-- hp1 --><b>Running With a GUI</b><br>
</a>
</h3>
<div style="margin-left:50px;">If the game data install utility is launched with this type specified, the utility confirms operations with the user, displays a progress bar during the install operation, an installation completion message, and an error dialog.<br><br></div>

<!-- sce_hd3 -->
<a name="Heading3_4">
<h2>
 4 <!-- hp --><b>Error Dialog Display</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">If an error is returned by the game data install utility when the utility is running without a GUI, the message dialog utility can be used to display an error dialog on the screen.<br>The game data install utility only passes an error value, and the screen text is also automatically output. The text can also be output separately.<br>(For information about message dialog utility options and error dialog screen operations, refer to the "Utility Services" overview document.)<br><br>If an error is returned by the game data install utility when the utility is running with a GUI, an error dialog is automatically displayed so the measures described above are unnecessary.<br><br></div>

<!-- sce_hd3 -->
<a name="Heading3_5">
<h2>
 5 <!-- hp --><b>Related Files</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">The following files are required to use the game data install utility.<br><br></div>
<div style="margin-left:90px;">
<table border=1>
<tr>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>Category</b>&nbsp;&nbsp;</td>
<td valign="TOP" bgcolor="#cccccc">&nbsp;&nbsp;<b>Filename</b>&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;Header file&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;utility_gamedata_install.h&nbsp;&nbsp;</td>
</tr>
<tr>
<td valign="TOP">&nbsp;&nbsp;Stub library file&nbsp;&nbsp;</td>
<td valign="TOP">&nbsp;&nbsp;utility_stub.a&nbsp;&nbsp;</td>
</tr>
</table>
</div>
<br>
<br>

<!-- sce_hd3 -->
<a name="Heading3_6">
<h2>
 6 <!-- hp --><b>Appendix: Calculating the Game Data Size</b>
<hr noshade>
</h2>


<!-- sce_hd4 -->
<a name="Heading4_6_1">
<h3>
<a href="#Heading3_6"> 6. </a>1 
<!-- hp1 --><b>Size Displayed in Game (When Necessary)</b><br>
</a>
</h3>
<div style="margin-left:50px;">It is generally acceptable to use a cluster size of 32 KB when calculating the game data size that will be displayed. <br>We recommend that when a Memory Stick&trade; is inserted, that its cluster size be used so that the precise size can be calculated. If no Memory Stick&trade; is inserted, the calculation can be done using a cluster size of 32 KB.<br>If the game data install utility is launched when a Memory Stick&trade; is not inserted, the return value of the <i>needSize</i>(<i>needSizeStr</i>) member variable of the <a href="../utility/Utility_Gamedata_Install-Reference-English.htm#SceUtilityGamedataInstallParam">SceUtilityGamedataInstallParam</a> structure should be used to obtain the game data size.<br></div>

<!-- sce_hd4 -->
<a name="Heading4_6_2">
<h3>
<a href="#Heading3_6"> 6. </a>2 
<!-- hp1 --><b>Size Marked on the Product Package</b><br>
</a>
</h3>
<div style="margin-left:50px;">Determine the install size assuming a cluster size of 32 KB, and use that size for the package. The value can be rounded up if it is suitable to do so.<br></div>
<div style="margin-left:67px;">Example:  544 KB -&gt; 550 KB<br></div>
<div style="margin-left:50px;">The size can also be obtained by saving the actual install data on a Memory Stick&trade; that has a cluster size of 32 KB (this can be created if a Memory Stick&trade; of at least 256 MB is formatted by PSP&trade; system software) and checking the save data size displayed by the save data management function of PSP&trade; system software.<br><br></div>

<!-- sce_hd3 -->
<a name="Heading3_7">
<h2>
 7 <!-- hp --><b>Appendix: Displaying the Available Free Space on a Memory Stick&trade; </b>
<hr noshade>
</h2>

<div style="margin-left:50px;">PSP&trade; system software calculates and displays the available free space by subtracting two clusters from the actual number of unused clusters on the Memory Stick&trade;.<br>These two clusters are used as a margin, so that game data can be installed correctly even if directories required by the system need to be created or if the parent directory gets large due to game data installation.<br>Note that there will be a difference when the available free space is obtained on different systems.<br><br></div>

<!-- sce_hd3 -->
<a name="Heading3_8">
<h2>
 8 <!-- hp --><b>Appendix: Install Data</b>
<hr noshade>
</h2>

<div style="margin-left:50px;">A game that is supported by the game data install utility must be created so that it can advance without problems even if the UMD&trade; alone is used.<br>Also, even when installation data is located on the Memory Stick&trade;, the game must still check whether or not that data is valid.<br><br>The size of game data installed by the game data install utility must not exceed 1 GB.<br>If you plan to install game data larger than this, contact your SCE regional account manager in advance.<br><br>If an error occurs when reading installed game data, read the corresponding data from the UMD&trade; to prevent unlimited retries.<br><br>Create the game so that installed game data is not accessed at the same time as the UMD&trade;. To do this, first access the installed game data, and if an error occurs, then access the UMD&trade;. This will prevent simultaneous access from occurring.<br><br>The game data install utility installs the install data under /PSP/SAVEDATA/(savedata_dir). Install data can be removed from PSP&trade; system software save data management, or by using the save data utility in the game and specifying delete type.<br><br></div>

<!-- sce_hd3 -->
<a name="Heading3_9">
<h2>
 9 <!-- hp --><b>Appendix: Conditions for Launching the Utility</b>
<hr noshade>
</h2>

<div style="margin-left:67px;">If the specified directory exists on the Memory Stick&trade;, the game data install utility will delete that directory first before starting the install.<br>Therefore, launch the game data install utility when there is no install data on the <br>Memory Stick&trade; or if the install data on the Memory Stick&trade; is corrupted.<br></div>

<!-- sce_hd3 -->
<a name="Heading3_10">
<h2>
 10 <!-- hp --><b>Appendix: Install Data Location</b>
<hr noshade>
</h2>

<div style="margin-left:90px;">
<table border=1>
<tr>
<td bgcolor="#cccccc">&nbsp;<b>Launch&nbsp;Source</b>&nbsp;</td>
<td bgcolor="#cccccc">&nbsp;<b>Install&nbsp;Source</b>&nbsp;</td>
<td bgcolor="#cccccc">&nbsp;<b>Install&nbsp;Destination</b>&nbsp;</td>
</tr>
<tr>
<td valign="top">&nbsp;Debugger&nbsp;</td>
<td valign="top">&nbsp;host0&nbsp;</td>
<td valign="top">&nbsp;ms0&nbsp;</td>
</tr>
<tr>
<td valign="top">&nbsp;UMD&trade;&nbsp;</td>
<td valign="top">&nbsp;disc0&nbsp;</td>
<td valign="top">&nbsp;ms0&nbsp;</td>
</tr>
<tr>
<td valign="top">&nbsp;Memory&nbsp;Stick&trade;&nbsp;</td>
<td valign="top">&nbsp;ms0&nbsp;</td>
<td valign="top">&nbsp;ms0&nbsp;</td>
</tr></table>
</div>
<br>
<br>
<div style="margin-left:50px;">Up to Runtime Library 6.20, when the game data install utility was launched via the debugger, it referenced data on the UMD&trade;.<br>Beginning with Runtime Library 6.30, it references host0:PSP_GAME/INSDIR.<br></div>
<div style="margin-left:67px;"><br><br></div>
<p><p><hr>
<div ALIGN="right">
    &copy;2010 Sony Computer Entertainment Inc.  All Rights Reserved.<br>
    SCE CONFIDENTIAL
</div>
</body>
</html>
